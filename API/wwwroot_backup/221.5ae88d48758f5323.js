"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[221],{3221:(fe,v,l)=>{l.r(v),l.d(v,{FolderManagementComponent:()=>ge});var g=l(6814),d=l(6223),f=l(2296),m=l(5195),y=l(5986),C=l(9347),A=l(3305),p=l(4170),h=l(617),F=l(2032),I=l(9038),Z=l(5940),b=l(8525),u=l(4104),M=l(2596),O=l(1365),c=l(4697),x=l(182),e=l(9212),U=l(9862),P=l(2425),q=l(3680);function E(n,r){1&n&&(e.TgZ(0,"div",51),e._UZ(1,"mat-spinner",52),e.qZA())}function N(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",53)(1,"p"),e._uU(2),e.qZA(),e.TgZ(3,"button",54),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.loadFolderTypes())}),e._uU(4,"Retry"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.errorLoadingFolderTypes)}}function D(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"p",56),e._uU(2,"No folder types defined yet."),e.qZA(),e.TgZ(3,"button",57),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createDefaultFolderTypes())}),e._UZ(4,"mat-icon",58),e._uU(5," Create Default Folder Types "),e.qZA()()}}function J(n,r){1&n&&(e.TgZ(0,"span",69),e._uU(1," Active "),e.qZA())}function w(n,r){1&n&&(e.TgZ(0,"span",70),e._uU(1," Inactive "),e.qZA())}function Q(n,r){1&n&&(e.TgZ(0,"span",71),e._uU(1," Container "),e.qZA())}function k(n,r){if(1&n&&(e.TgZ(0,"p",72),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(),e.Oqu(t.description)}}function R(n,r){1&n&&e._UZ(0,"div",73)}function K(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"div",62)(2,"div",15)(3,"div",15),e._UZ(4,"mat-icon",16),e.qZA(),e.TgZ(5,"div",17)(6,"div",15)(7,"span",19),e._uU(8),e.qZA(),e.YNc(9,J,2,0,"span",20)(10,w,2,0,"span",21)(11,Q,2,0,"span",22),e.qZA(),e.TgZ(12,"p",23),e._uU(13),e.qZA(),e.YNc(14,k,2,1,"p",24),e.TgZ(15,"p",25),e._uU(16),e.qZA()(),e.TgZ(17,"div",63)(18,"button",64),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.updateFolderType(i))}),e._UZ(19,"mat-icon",65),e.qZA(),e.TgZ(20,"button",66),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.deleteFolderType(i))}),e._UZ(21,"mat-icon",67),e.qZA()()()(),e.YNc(22,R,1,0,"div",68),e.qZA()}if(2&n){const t=r.$implicit;e.xp6(4),e.MGl("svgIcon","mat:",t.icon||"folder",""),e.xp6(4),e.Oqu(t.name),e.xp6(),e.Q6J("ngIf",t.isActive),e.xp6(),e.Q6J("ngIf",!t.isActive),e.xp6(),e.Q6J("ngIf",t.allowChildren),e.xp6(2),e.Oqu(t.arabicName),e.xp6(),e.Q6J("ngIf",t.description),e.xp6(2),e.hij("Order: ",t.displayOrder,""),e.xp6(6),e.Q6J("ngIf",t.allowChildren)}}function $(n,r){if(1&n&&(e.TgZ(0,"div")(1,"div",59),e.YNc(2,K,23,9,"div",60),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.folderTypes)}}function L(n,r){1&n&&(e.TgZ(0,"span",69),e._uU(1," Active "),e.qZA())}function Y(n,r){1&n&&(e.TgZ(0,"span",70),e._uU(1," Inactive "),e.qZA())}function W(n,r){1&n&&(e.TgZ(0,"span",71),e._uU(1," Container "),e.qZA())}function B(n,r){if(1&n&&(e.TgZ(0,"p",72),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(),e.hij(" ",t.folderTypeForm.get("description").value," ")}}function j(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Name is required "),e.qZA())}function G(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Arabic name is required "),e.qZA())}function S(n,r){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(),e.hij(" ",t.name," ")}}function H(n,r){if(1&n&&(e.TgZ(0,"mat-option",33)(1,"div",15),e._UZ(2,"mat-icon",74),e.TgZ(3,"span"),e._uU(4),e.qZA()()()),2&n){const t=r.$implicit;e.Q6J("value",t.name),e.xp6(2),e.MGl("svgIcon","mat:",t.name,""),e.xp6(2),e.Oqu(t.display)}}function V(n,r){1&n&&(e.TgZ(0,"div",75),e._UZ(1,"mat-spinner",76),e.qZA())}function X(n,r){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(),e.AsE(" ",t.displayName," (",t.clientCode||"No Code",") ")}}function z(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Manage folders for the selected client"),e.qZA())}function ee(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1,"Using mock client - for testing only"),e.qZA())}function te(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"No client selected"),e.qZA())}function ne(n,r){1&n&&(e.TgZ(0,"div",51),e._UZ(1,"mat-spinner",52),e.qZA())}function oe(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",88)(1,"p",89),e._uU(2,"No folders found for this client."),e.qZA(),e.TgZ(3,"button",90),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.createDefaultFolders())}),e._UZ(4,"mat-icon",91),e._uU(5," Create Default Folders "),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("disabled",!t.selectedClientId)}}function re(n,r){if(1&n&&(e.TgZ(0,"p",104),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(),e.Oqu(t.description)}}function ae(n,r){1&n&&(e.TgZ(0,"span",105),e._UZ(1,"mat-icon",106),e._uU(2," Closed "),e.qZA())}function le(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",94)(1,"div",95),e._UZ(2,"mat-icon",96),e.TgZ(3,"div",17)(4,"h3",97),e._uU(5),e.qZA(),e.TgZ(6,"p",98),e._uU(7),e.qZA(),e.YNc(8,re,2,1,"p",99),e.TgZ(9,"div",100)(10,"span",101),e._uU(11),e.ALo(12,"date"),e.qZA(),e.YNc(13,ae,3,0,"span",102),e.qZA()(),e.TgZ(14,"button",103),e.NdJ("click",function(){const i=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.deleteFolder(i))}),e._UZ(15,"mat-icon",67),e.qZA()()()}if(2&n){const t=r.$implicit;e.xp6(2),e.MGl("svgIcon","mat:",(null==t.folderType?null:t.folderType.icon)||"folder",""),e.xp6(3),e.Oqu(t.folderName),e.xp6(2),e.Oqu((null==t.folderType?null:t.folderType.name)||"Unknown Type"),e.xp6(),e.Q6J("ngIf",t.description),e.xp6(3),e.hij("Created: ",e.xi3(12,6,t.createdAt,"short"),""),e.xp6(2),e.Q6J("ngIf",t.isClosed)}}function ie(n,r){if(1&n&&(e.TgZ(0,"div",92),e.YNc(1,le,16,9,"div",93),e.qZA()),2&n){const t=e.oxw(3);e.xp6(),e.Q6J("ngForOf",t.folders)}}function de(n,r){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,oe,6,1,"div",86)(2,ie,2,1,"div",87),e.qZA()),2&n){const t=e.oxw(2);e.xp6(),e.Q6J("ngIf",0===t.folders.length),e.xp6(),e.Q6J("ngIf",t.folders.length>0)}}function se(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"mat-card-actions",107)(1,"button",108),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createDefaultFolders())}),e._UZ(2,"mat-icon",109),e._uU(3," Add Standard Folders "),e.qZA()()}}function ce(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Folder name is required "),e.qZA())}function me(n,r){if(1&n&&(e.TgZ(0,"mat-option",33)(1,"div",15),e._UZ(2,"mat-icon",74),e._uU(3),e.qZA()()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(2),e.MGl("svgIcon","mat:",t.icon,""),e.xp6(),e.hij(" ",t.name," ")}}function pe(n,r){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Folder type is required "),e.qZA())}function _e(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",77)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title"),e._uU(5,"Client Folders"),e.qZA(),e.TgZ(6,"mat-card-subtitle"),e.YNc(7,z,2,0,"span",9)(8,ee,2,0,"span",78)(9,te,2,0,"span",9),e.qZA()(),e.TgZ(10,"mat-card-content",79),e.YNc(11,ne,2,0,"div",6)(12,de,3,2,"div",9),e.qZA(),e.YNc(13,se,4,0,"mat-card-actions",80),e.qZA()(),e.TgZ(14,"div",81)(15,"mat-card")(16,"mat-card-header")(17,"mat-card-title"),e._uU(18,"Create Custom Folder"),e.qZA(),e.TgZ(19,"mat-card-subtitle"),e._uU(20,"Create a new folder for this client"),e.qZA()(),e.TgZ(21,"mat-card-content",11)(22,"form",26),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.createFolder())}),e.TgZ(23,"div",27)(24,"mat-form-field",28)(25,"mat-label"),e._uU(26,"Folder Name"),e.qZA(),e._UZ(27,"input",82),e.YNc(28,ce,2,0,"mat-error",9),e.qZA(),e.TgZ(29,"mat-form-field",28)(30,"mat-label"),e._uU(31,"Description"),e.qZA(),e._UZ(32,"textarea",31),e.qZA(),e.TgZ(33,"mat-form-field",28)(34,"mat-label"),e._uU(35,"Folder Type"),e.qZA(),e.TgZ(36,"mat-select",83),e.YNc(37,me,4,3,"mat-option",34),e.qZA(),e.YNc(38,pe,2,0,"mat-error",9),e.qZA()(),e.TgZ(39,"div",84)(40,"button",42),e._uU(41," Create Folder "),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",t.selectedClientId>0),e.xp6(),e.Q6J("ngIf",t.selectedClientId<0),e.xp6(),e.Q6J("ngIf",!t.selectedClientId),e.xp6(2),e.Q6J("ngIf",t.loadingFolders),e.xp6(),e.Q6J("ngIf",!t.loadingFolders),e.xp6(),e.Q6J("ngIf",t.folders.length>0),e.xp6(9),e.Q6J("formGroup",t.folderForm),e.xp6(6),e.Q6J("ngIf",t.folderForm.get("folderName").hasError("required")),e.xp6(9),e.Q6J("ngForOf",t.folderTypes),e.xp6(),e.Q6J("ngIf",t.folderForm.get("folderTypeId").hasError("required")),e.xp6(2),e.Q6J("disabled",t.folderForm.invalid)}}let ge=(()=>{class n{constructor(t,a,o,i){this.http=t,this.fb=a,this.dialog=o,this.toastr=i,this.folderTypes=[],this.loadingFolderTypes=!1,this.errorLoadingFolderTypes=null,this.clients=[],this.loadingClients=!1,this.folders=[],this.selectedClientId=null,this.loadingFolders=!1,this.availableIcons=[{name:"folder",display:"Folder"},{name:"folder_special",display:"Special Folder"},{name:"description",display:"Document"},{name:"receipt",display:"Receipt"},{name:"account_balance",display:"Finance"},{name:"business",display:"Business"},{name:"work",display:"Work"},{name:"home",display:"Home"},{name:"verified",display:"Verified"},{name:"payments",display:"Payments"},{name:"attach_money",display:"Money"},{name:"attach_file",display:"File"},{name:"cloud",display:"Cloud"},{name:"inbox",display:"Inbox"},{name:"lock",display:"Secured"}],this.createForms()}ngOnInit(){this.loadFolderTypes(),this.loadClients()}createForms(){this.folderTypeForm=this.fb.group({name:["",[d.kI.required]],arabicName:["",[d.kI.required]],description:[""],parentId:[null],allowChildren:[!1],icon:["folder"],isActive:[!0],displayOrder:[0]}),this.folderForm=this.fb.group({folderName:["",[d.kI.required]],description:[""],folderTypeId:[null,[d.kI.required]],clientID:[null,[d.kI.required]]})}loadFolderTypes(){this.loadingFolderTypes=!0,this.errorLoadingFolderTypes=null,this.http.get(`${c.N.apiUrl}/TaxFileManager/folder-types`).subscribe({next:t=>{this.folderTypes=t,this.loadingFolderTypes=!1},error:t=>{console.error("Error loading folder types:",t),this.errorLoadingFolderTypes="Failed to load folder types. Please try again.",this.loadingFolderTypes=!1,this.createMockFolderTypes()}})}loadClients(){this.loadingClients=!0,this.http.get(`${c.N.apiUrl}/TaxFileManager/clients`).subscribe({next:t=>{this.clients=t,this.loadingClients=!1,t.length>0&&!this.selectedClientId&&(this.selectedClientId=t[0].id,this.folderForm.get("clientID").setValue(this.selectedClientId),this.loadFolders())},error:t=>{console.error("Error loading clients:",t),this.toastr.error("Failed to load clients"),this.loadingClients=!1,this.createMockClient()}})}createMockClient(){const t={id:-1,userName:"mock@example.com",displayName:"Mock Client",email:"mock@example.com",clientCode:"MOCK001",isActive:!0};this.clients=[t],this.selectedClientId=t.id,this.folderForm.get("clientID").setValue(this.selectedClientId)}onClientChange(t){this.selectedClientId=t,this.loadFolders(),this.folderForm.get("clientID").setValue(t)}loadFolders(){this.selectedClientId&&(this.loadingFolders=!0,this.http.get(`${c.N.apiUrl}/TaxFileManager/client/${this.selectedClientId}/folders`).subscribe({next:t=>{this.folders=t,this.loadingFolders=!1},error:t=>{console.error("Error loading folders:",t),this.toastr.error("Failed to load folders"),this.loadingFolders=!1}}))}saveFolderType(){this.folderTypeForm.invalid||this.http.post(`${c.N.apiUrl}/TaxFileManager/folder-types`,this.folderTypeForm.value).subscribe({next:a=>{this.toastr.success("Folder type created successfully"),this.folderTypes.push(a),this.folderTypeForm.reset({isActive:!0,allowChildren:!1,icon:"folder"})},error:a=>{console.error("Error creating folder type:",a),this.toastr.error("Failed to create folder type")}})}createFolder(){this.folderForm.invalid||this.http.post(`${c.N.apiUrl}/TaxFileManager/folders`,this.folderForm.value).subscribe({next:a=>{this.toastr.success("Folder created successfully"),this.folders.push(a),this.folderForm.reset({clientID:this.selectedClientId})},error:a=>{console.error("Error creating folder:",a),this.toastr.error("Failed to create folder")}})}deleteFolderType(t){this.dialog.open(x.$,{width:"400px",data:{title:"Confirm Delete",message:`Are you sure you want to delete folder type "${t.name}"? This may affect existing folders.`}}).afterClosed().subscribe(o=>{o&&this.http.delete(`${c.N.apiUrl}/TaxFileManager/folder-types/${t.id}`).subscribe({next:()=>{this.toastr.success("Folder type deleted successfully"),this.folderTypes=this.folderTypes.filter(i=>i.id!==t.id)},error:i=>{console.error("Error deleting folder type:",i),this.toastr.error("Failed to delete folder type. It may be in use by existing folders.")}})})}deleteFolder(t){this.dialog.open(x.$,{width:"400px",data:{title:"Confirm Delete",message:`Are you sure you want to delete folder "${t.folderName}"? All files within this folder will also be deleted.`}}).afterClosed().subscribe(o=>{o&&this.http.delete(`${c.N.apiUrl}/TaxFileManager/folders/${t.id}`).subscribe({next:()=>{this.toastr.success("Folder deleted successfully"),this.folders=this.folders.filter(i=>i.id!==t.id)},error:i=>{console.error("Error deleting folder:",i),this.toastr.error("Failed to delete folder")}})})}updateFolderType(t){this.dialog.open(x.$,{width:"500px",data:{title:"Edit Folder Type",message:"Update folder type properties:",isForm:!0,formFields:[{name:"name",label:"Name",type:"text",value:t.name},{name:"arabicName",label:"Arabic Name",type:"text",value:t.arabicName},{name:"description",label:"Description",type:"text",value:t.description||""},{name:"displayOrder",label:"Display Order",type:"text",value:t.displayOrder||0},{name:"icon",label:"Icon",type:"select",value:t.icon||"folder",options:this.availableIcons.map(o=>({value:o.name,label:o.display}))},{name:"isActive",label:"Active",type:"checkbox",value:t.isActive},{name:"allowChildren",label:"Allow Sub-Folders",type:"checkbox",value:t.allowChildren}]}}).afterClosed().subscribe(o=>{if(o){const i={...t,name:o.name,arabicName:o.arabicName,description:o.description,displayOrder:parseInt(o.displayOrder)||0,icon:o.icon,isActive:o.isActive,allowChildren:o.allowChildren,lastModified:new Date};this.http.put(`${c.N.apiUrl}/TaxFileManager/folder-types/${t.id}`,i).subscribe({next:s=>{this.toastr.success("Folder type updated successfully");const _=this.folderTypes.findIndex(T=>T.id===t.id);-1!==_&&(this.folderTypes[_]=s)},error:s=>{console.error("Error updating folder type:",s),this.toastr.error("Failed to update folder type");const _=this.folderTypes.findIndex(T=>T.id===t.id);-1!==_&&(this.folderTypes[_]=i,this.toastr.info("Updated folder type locally for demonstration"))}})}})}createDefaultFolders(){this.selectedClientId?this.http.post(`${c.N.apiUrl}/taxfile/client/${this.selectedClientId}/create-folders`,{}).subscribe({next:()=>{this.toastr.success("Default folders created successfully"),this.loadFolders()},error:t=>{console.error("Error creating default folders:",t),this.toastr.error("Failed to create default folders")}}):this.toastr.error("Please select a client first")}resetFolderTypeForm(){this.folderTypeForm.reset({name:"",arabicName:"",description:"",parentId:null,icon:"folder",allowChildren:!1,isActive:!0,displayOrder:0})}createDefaultFolderTypes(){this.loadingFolderTypes=!0,this.http.post(`${c.N.apiUrl}/TaxFileManager/folder-types/create-defaults`,{}).subscribe({next:t=>{this.toastr.success(`Created ${t.length} default folder types`),this.loadFolderTypes()},error:t=>{console.error("Error creating default folder types:",t),this.toastr.error("Failed to create default folder types"),this.loadingFolderTypes=!1,this.createMockFolderTypes()}})}createMockFolderTypes(){this.folderTypes=[{id:-1,name:"Tax Returns",arabicName:"\u0639\u0648\u0627\u0626\u062f \u0627\u0644\u0636\u0631\u0627\u0626\u0628",description:"Annual tax return documents",icon:"description",isActive:!0,allowChildren:!1,parentId:null,displayOrder:1,createdAt:new Date},{id:-2,name:"Receipts",arabicName:"\u0625\u064a\u0635\u0627\u0644\u0627\u062a",description:"Business expense receipts",icon:"receipt",isActive:!0,allowChildren:!1,parentId:null,displayOrder:2,createdAt:new Date},{id:-3,name:"Income",arabicName:"\u0627\u0644\u062f\u062e\u0644",description:"Income documentation",icon:"attach_money",isActive:!0,allowChildren:!1,parentId:null,displayOrder:3,createdAt:new Date}],this.loadingFolderTypes=!1,this.toastr.info("Using mock folder types for demonstration")}static#e=this.\u0275fac=function(a){return new(a||n)(e.Y36(U.eN),e.Y36(d.qu),e.Y36(C.uw),e.Y36(P._W))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-folder-management"]],standalone:!0,features:[e.jDz],decls:105,vars:23,consts:[[1,"folder-management-container","p-6"],["label","Folder Types"],[1,"folder-types-container","mt-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"folder-types-list"],[1,"mt-4"],["class","flex justify-center my-8",4,"ngIf"],["class","error-message p-4 bg-red-50 text-red-800 rounded",4,"ngIf"],["class","text-center p-4",4,"ngIf"],[4,"ngIf"],[1,"create-folder-type"],[1,"mt-6","pb-4"],[1,"mb-6","p-4","bg-gray-50","rounded-md","border","border-gray-200","preview-box"],[1,"text-center","text-gray-600","mb-4","text-sm","font-medium"],[1,"folder-tree-content","p-3"],[1,"flex","items-center"],[1,"text-blue-500","mr-3",3,"svgIcon"],[1,"flex-grow"],[1,"flex","items-center","flex-wrap"],[1,"font-medium"],["class","ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded-full",4,"ngIf"],["class","ml-2 text-xs bg-red-100 text-red-800 px-2 py-0.5 rounded-full",4,"ngIf"],["class","ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",4,"ngIf"],[1,"text-sm","text-gray-600","m-0"],["class","text-xs text-gray-500 m-0 mt-1",4,"ngIf"],[1,"text-xs","text-gray-400","m-0","mt-1"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"grid","grid-cols-1","gap-5"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","arabicName","required",""],["matInput","","formControlName","description","rows","3"],["formControlName","parentId"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","icon"],["matInput","","type","number","formControlName","displayOrder"],[1,"flex","gap-6","mt-2"],["formControlName","allowChildren",1,"text-lg"],["formControlName","isActive",1,"text-lg"],[1,"mt-6","flex","justify-end","gap-3"],["mat-stroked-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["label","Client Folders"],[1,"client-folders-container","mt-4"],[1,"mb-6"],[1,"mt-4","pb-3"],[1,"flex","items-center","gap-4"],[1,"text-lg",3,"disabled","selectionChange"],["class","flex justify-center p-2",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"flex","justify-center","my-8"],["diameter","40"],[1,"error-message","p-4","bg-red-50","text-red-800","rounded"],["mat-button","","color","primary",3,"click"],[1,"text-center","p-4"],[1,"mb-4"],["mat-raised-button","","color","primary",3,"click"],["svgIcon","mat:auto_awesome",1,"mr-2"],[1,"folder-tree"],["class","folder-tree-item",4,"ngFor","ngForOf"],[1,"folder-tree-item"],[1,"folder-tree-content","p-2","hover:bg-gray-50","rounded"],[1,"flex"],["mat-icon-button","","color","primary","matTooltip","Edit Folder Type",3,"click"],["svgIcon","mat:edit"],["mat-icon-button","","color","warn","matTooltip","Delete Folder Type",3,"click"],["svgIcon","mat:delete"],["class","folder-tree-children pl-8",4,"ngIf"],[1,"ml-2","text-xs","bg-green-100","text-green-800","px-2","py-0.5","rounded-full"],[1,"ml-2","text-xs","bg-red-100","text-red-800","px-2","py-0.5","rounded-full"],[1,"ml-2","text-xs","bg-blue-100","text-blue-800","px-2","py-0.5","rounded-full"],[1,"text-xs","text-gray-500","m-0","mt-1"],[1,"folder-tree-children","pl-8"],[1,"mr-2",3,"svgIcon"],[1,"flex","justify-center","p-2"],["diameter","24"],[1,"folders-list"],["class","text-amber-600",4,"ngIf"],[1,"mt-6"],["class","flex justify-center pb-4",4,"ngIf"],[1,"create-folder"],["matInput","","formControlName","folderName","required",""],["formControlName","folderTypeId","required",""],[1,"mt-8","flex","justify-end"],[1,"text-amber-600"],["class","text-center p-6",4,"ngIf"],["class","folder-grid",4,"ngIf"],[1,"text-center","p-6"],[1,"mb-6","text-lg"],["mat-raised-button","","color","primary",3,"disabled","click"],["svgIcon","mat:create_new_folder",1,"mr-2"],[1,"folder-grid"],["class","folder-card p-4 border border-gray-200 rounded-md hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"folder-card","p-4","border","border-gray-200","rounded-md","hover:bg-gray-50"],[1,"flex","items-start"],[1,"mr-3","text-2xl","text-blue-500",3,"svgIcon"],[1,"text-lg","m-0"],[1,"text-sm","text-gray-600","mb-1"],["class","text-xs text-gray-500 m-0 mb-2",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"mr-2"],["class","text-red-500",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete Folder",3,"click"],[1,"text-xs","text-gray-500","m-0","mb-2"],[1,"text-red-500"],["svgIcon","mat:lock",1,"text-xs","align-middle"],[1,"flex","justify-center","pb-4"],["mat-stroked-button","","color","primary",3,"click"],["svgIcon","mat:add",1,"mr-2"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0)(1,"mat-tab-group")(2,"mat-tab",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"mat-card")(7,"mat-card-header")(8,"mat-card-title"),e._uU(9,"Folder Types"),e.qZA(),e.TgZ(10,"mat-card-subtitle"),e._uU(11,"Manage available folder types for tax documents"),e.qZA()(),e.TgZ(12,"mat-card-content",5),e.YNc(13,E,2,0,"div",6)(14,N,5,1,"div",7)(15,D,6,0,"div",8)(16,$,3,1,"div",9),e.qZA()()(),e.TgZ(17,"div",10)(18,"mat-card")(19,"mat-card-header")(20,"mat-card-title"),e._uU(21,"Create Folder Type"),e.qZA(),e.TgZ(22,"mat-card-subtitle"),e._uU(23,"Define a new folder type for document organization"),e.qZA()(),e.TgZ(24,"mat-card-content",11)(25,"div",12)(26,"div",13),e._uU(27,"FOLDER TYPE PREVIEW"),e.qZA(),e.TgZ(28,"div",14)(29,"div",15)(30,"div",15),e._UZ(31,"mat-icon",16),e.qZA(),e.TgZ(32,"div",17)(33,"div",18)(34,"span",19),e._uU(35),e.qZA(),e.YNc(36,L,2,0,"span",20)(37,Y,2,0,"span",21)(38,W,2,0,"span",22),e.qZA(),e.TgZ(39,"p",23),e._uU(40),e.qZA(),e.YNc(41,B,2,1,"p",24),e.TgZ(42,"p",25),e._uU(43),e.qZA()()()()(),e.TgZ(44,"form",26),e.NdJ("ngSubmit",function(){return o.saveFolderType()}),e.TgZ(45,"div",27)(46,"mat-form-field",28)(47,"mat-label"),e._uU(48,"Name"),e.qZA(),e._UZ(49,"input",29),e.YNc(50,j,2,0,"mat-error",9),e.qZA(),e.TgZ(51,"mat-form-field",28)(52,"mat-label"),e._uU(53,"Arabic Name"),e.qZA(),e._UZ(54,"input",30),e.YNc(55,G,2,0,"mat-error",9),e.qZA(),e.TgZ(56,"mat-form-field",28)(57,"mat-label"),e._uU(58,"Description"),e.qZA(),e._UZ(59,"textarea",31),e.qZA(),e.TgZ(60,"mat-form-field",28)(61,"mat-label"),e._uU(62,"Parent Folder Type (Optional)"),e.qZA(),e.TgZ(63,"mat-select",32)(64,"mat-option",33),e._uU(65,"None"),e.qZA(),e.YNc(66,S,2,2,"mat-option",34),e.qZA()(),e.TgZ(67,"mat-form-field",28)(68,"mat-label"),e._uU(69,"Icon"),e.qZA(),e.TgZ(70,"mat-select",35),e.YNc(71,H,5,3,"mat-option",34),e.qZA()(),e.TgZ(72,"mat-form-field",28)(73,"mat-label"),e._uU(74,"Display Order"),e.qZA(),e._UZ(75,"input",36),e.TgZ(76,"mat-hint"),e._uU(77,"Lower numbers will appear first"),e.qZA()(),e.TgZ(78,"div",37)(79,"mat-checkbox",38),e._uU(80," Allow Sub-Folders "),e.qZA(),e.TgZ(81,"mat-checkbox",39),e._uU(82," Active "),e.qZA()()(),e.TgZ(83,"div",40)(84,"button",41),e.NdJ("click",function(){return o.resetFolderTypeForm()}),e._uU(85," Reset "),e.qZA(),e.TgZ(86,"button",42),e._uU(87," Create Folder Type "),e.qZA()()()()()()()()(),e.TgZ(88,"mat-tab",43)(89,"div",44)(90,"mat-card",45)(91,"mat-card-header")(92,"mat-card-title"),e._uU(93,"Client Selection"),e.qZA(),e.TgZ(94,"mat-card-subtitle"),e._uU(95,"Select a client to manage their folders"),e.qZA()(),e.TgZ(96,"mat-card-content",46)(97,"div",47)(98,"mat-form-field",28)(99,"mat-label"),e._uU(100,"Select Client"),e.qZA(),e.TgZ(101,"mat-select",48),e.NdJ("selectionChange",function(s){return o.onClientChange(s.value)}),e.YNc(102,V,2,0,"div",49)(103,X,2,3,"mat-option",34),e.qZA()()()()(),e.YNc(104,_e,42,11,"div",50),e.qZA()()()()),2&a&&(e.xp6(13),e.Q6J("ngIf",o.loadingFolderTypes),e.xp6(),e.Q6J("ngIf",o.errorLoadingFolderTypes&&!o.loadingFolderTypes),e.xp6(),e.Q6J("ngIf",!o.loadingFolderTypes&&0===o.folderTypes.length),e.xp6(),e.Q6J("ngIf",!o.loadingFolderTypes&&o.folderTypes.length>0),e.xp6(15),e.MGl("svgIcon","mat:",o.folderTypeForm.get("icon").value||"folder",""),e.xp6(4),e.Oqu(o.folderTypeForm.get("name").value||"Folder Name"),e.xp6(),e.Q6J("ngIf",o.folderTypeForm.get("isActive").value),e.xp6(),e.Q6J("ngIf",!o.folderTypeForm.get("isActive").value),e.xp6(),e.Q6J("ngIf",o.folderTypeForm.get("allowChildren").value),e.xp6(2),e.Oqu(o.folderTypeForm.get("arabicName").value||"\u0627\u0633\u0645 \u0627\u0644\u0645\u062c\u0644\u062f"),e.xp6(),e.Q6J("ngIf",o.folderTypeForm.get("description").value),e.xp6(2),e.hij("Order: ",o.folderTypeForm.get("displayOrder").value||0,""),e.xp6(),e.Q6J("formGroup",o.folderTypeForm),e.xp6(6),e.Q6J("ngIf",o.folderTypeForm.get("name").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.folderTypeForm.get("arabicName").hasError("required")),e.xp6(9),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",o.folderTypes),e.xp6(5),e.Q6J("ngForOf",o.availableIcons),e.xp6(15),e.Q6J("disabled",o.folderTypeForm.invalid),e.xp6(15),e.Q6J("disabled",o.loadingClients),e.xp6(),e.Q6J("ngIf",o.loadingClients),e.xp6(),e.Q6J("ngForOf",o.clients),e.xp6(),e.Q6J("ngIf",o.selectedClientId||0===o.clients.length))},dependencies:[g.ez,g.sg,g.O5,g.uU,d.u5,d._Y,d.Fj,d.wV,d.JJ,d.JL,d.Q7,d.UX,d.sg,d.u,f.ot,f.lW,f.RK,m.QW,m.a8,m.hq,m.dn,m.dk,m.$j,m.n5,y.p9,y.oG,C.Is,A.To,p.lN,p.KE,p.hX,p.bx,p.TO,h.Ps,h.Hw,F.c,F.Nt,I.ie,Z.Cq,Z.Ou,b.LD,b.gD,q.ey,u.Nh,u.uX,u.SP,M.AV,M.gM,O.aw],styles:[".folder-management-container[_ngcontent-%COMP%]{min-height:800px;margin-bottom:20px;width:100%}.folder-management-container[_ngcontent-%COMP%]   .folder-types-container[_ngcontent-%COMP%], .folder-management-container[_ngcontent-%COMP%]   .client-folders-container[_ngcontent-%COMP%]{width:100%}.folder-management-container[_ngcontent-%COMP%]   .folder-types-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%], .folder-management-container[_ngcontent-%COMP%]   .client-folders-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{height:100%;min-height:700px}.folder-management-container[_ngcontent-%COMP%]   .folder-types-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .folder-management-container[_ngcontent-%COMP%]   .client-folders-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:calc(100% - 60px);overflow-y:auto}.folder-management-container[_ngcontent-%COMP%]   .folder-type-item[_ngcontent-%COMP%], .folder-management-container[_ngcontent-%COMP%]   .folder-item[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px}.folder-management-container[_ngcontent-%COMP%]   .folder-type-item[_ngcontent-%COMP%]:hover, .folder-management-container[_ngcontent-%COMP%]   .folder-item[_ngcontent-%COMP%]:hover{background-color:#0000000a}.folder-management-container[_ngcontent-%COMP%]   .no-client-selected[_ngcontent-%COMP%]{margin-top:40px}.folder-management-container[_ngcontent-%COMP%]   .no-client-selected[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:64px;height:64px;margin:0 auto;display:block}.folder-management-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center}.folder-management-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px}.folder-tree[_ngcontent-%COMP%]{margin-top:16px;max-height:750px;overflow-y:auto}.folder-tree-item[_ngcontent-%COMP%]{margin-bottom:8px;border-radius:4px;overflow:hidden}.folder-tree-content[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);border-radius:4px;transition:all .2s ease}.folder-tree-content[_ngcontent-%COMP%]:hover{background-color:#00000005;border-color:#0000001f}.folder-tree-children[_ngcontent-%COMP%]{margin-top:4px;margin-left:24px;border-left:1px dashed rgba(0,0,0,.12)}.preview-box[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.12);border-radius:4px;padding:16px;margin-bottom:20px;background-color:#00000005}.create-folder-type[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], .create-folder[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding-bottom:20px}.folder-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;margin-top:16px;max-height:750px}.folder-grid[_ngcontent-%COMP%]   .folder-card[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.08);border-radius:4px;transition:all .2s ease}.folder-grid[_ngcontent-%COMP%]   .folder-card[_ngcontent-%COMP%]:hover{background-color:#00000005;border-color:#0000001f;box-shadow:0 2px 4px #0000000d}"]})}return n})()}}]);