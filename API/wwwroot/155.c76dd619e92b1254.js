"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[155],{9155:(tt,v,a)=>{a.r(v),a.d(v,{BlockVisitorDialogComponent:()=>F,RejectVisitDialogComponent:()=>b,VisitDetailsComponent:()=>Z});var h=a(177),g=a(5596),_=a(8834),C=a(9213),x=a(6471),M=a(9183),P=a(5416),O=a(4823),r=a(4006),d=a(2102),m=a(9631),l=a(9417),E=a(1413),p=a(6977),f=a(1904),t=a(4438),k=a(9192),j=a(1626),D=a(6964);function I(n,s){if(1&n){const i=t.RV6();t.j41(0,"img",29),t.bIt("error",function(){t.eBV(i);const e=t.XpG(2);return t.Njj(e.onImageError(null==e.visitor?null:e.visitor.personImageUrl))}),t.k0s()}if(2&n){const i=t.XpG(2);t.Y8G("src",i.getImageUrl(null==i.visitor?null:i.visitor.personImageUrl),t.B4B)("alt",i.visit.visitorName)}}function R(n,s){1&n&&(t.j41(0,"div",30)(1,"mat-icon"),t.EFF(2,"person"),t.k0s()())}function V(n,s){if(1&n&&(t.j41(0,"div",31)(1,"mat-icon"),t.EFF(2,"badge"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.visitor.nationalId)}}function w(n,s){if(1&n&&(t.j41(0,"div",31)(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.visitor.phone)}}function A(n,s){if(1&n&&(t.j41(0,"div",31)(1,"mat-icon"),t.EFF(2,"business"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.visitor.company)}}function T(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u0633\u0628\u0628 \u0627\u0644\u0632\u064a\u0627\u0631\u0629:"),t.k0s(),t.j41(3,"span",24),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.visit.visitReason)}}function $(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0645\u062a\u0648\u0642\u0639\u0629:"),t.k0s(),t.j41(3,"span",24),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.SpI("",i.visit.expectedDurationHours," \u0633\u0627\u0639\u0629")}}function G(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u0648\u0642\u062a \u0627\u0644\u062e\u0631\u0648\u062c:"),t.k0s(),t.j41(3,"span",24),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.formatDate(i.visit.checkOutAt))}}function B(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636:"),t.k0s(),t.j41(3,"span",32),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.visit.rejectionReason)}}function y(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0631\u0641\u0636:"),t.k0s(),t.j41(3,"span",24),t.EFF(4),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(4),t.JRh(i.formatDate(i.visit.rejectedAt))}}function N(n,s){if(1&n&&(t.j41(0,"div",22)(1,"span",23),t.EFF(2,"\u0631\u0642\u0645 \u0627\u0644\u0644\u0648\u062d\u0629:"),t.k0s(),t.j41(3,"mat-chip",34)(4,"mat-icon"),t.EFF(5,"directions_car"),t.k0s(),t.EFF(6),t.k0s()()),2&n){const i=t.XpG(3);t.R7$(6),t.SpI(" ",i.visit.carPlate," ")}}function U(n,s){if(1&n){const i=t.RV6();t.j41(0,"img",38),t.bIt("error",function(){t.eBV(i);const e=t.XpG(4);return t.Njj(e.onImageError(e.visit.carImageUrl))})("click",function(){t.eBV(i);const e=t.XpG(4);return t.Njj(e.viewCarImage())}),t.k0s()}if(2&n){const i=t.XpG(4);t.Y8G("src",i.getImageUrl(i.visit.carImageUrl),t.B4B)}}function Y(n,s){1&n&&(t.j41(0,"div",30)(1,"mat-icon"),t.EFF(2,"directions_car"),t.k0s(),t.j41(3,"span"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631\u0629"),t.k0s()())}function X(n,s){if(1&n){const i=t.RV6();t.j41(0,"button",39),t.bIt("click",function(){t.eBV(i);const e=t.XpG(4);return t.Njj(e.viewCarImage())}),t.j41(1,"mat-icon"),t.EFF(2,"zoom_in"),t.k0s(),t.EFF(3," \u0639\u0631\u0636 \u0628\u0627\u0644\u062d\u062c\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 "),t.k0s()}}function L(n,s){if(1&n&&(t.j41(0,"div",35),t.DNE(1,U,1,1,"img",36)(2,Y,5,0,"div",18)(3,X,4,0,"button",37),t.k0s()),2&n){const i=t.XpG(3);t.R7$(),t.Y8G("ngIf",i.shouldShowImage(i.visit.carImageUrl)),t.R7$(),t.Y8G("ngIf",!i.shouldShowImage(i.visit.carImageUrl)),t.R7$(),t.Y8G("ngIf",i.shouldShowImage(i.visit.carImageUrl))}}function S(n,s){if(1&n&&(t.j41(0,"mat-card",14)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"directions_car"),t.k0s(),t.EFF(5," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0633\u064a\u0627\u0631\u0629 "),t.k0s()(),t.j41(6,"mat-card-content"),t.DNE(7,N,7,1,"div",25)(8,L,4,3,"div",33),t.k0s()()),2&n){const i=t.XpG(2);t.R7$(7),t.Y8G("ngIf",i.visit.carPlate),t.R7$(),t.Y8G("ngIf",i.visit.carImageUrl)}}function W(n,s){if(1&n){const i=t.RV6();t.j41(0,"img",42),t.bIt("error",function(){t.eBV(i);const e=t.XpG(3);return t.Njj(e.onImageError(e.visitor.idCardImageUrl))}),t.k0s()}if(2&n){const i=t.XpG(3);t.Y8G("src",i.getImageUrl(i.visitor.idCardImageUrl),t.B4B)}}function K(n,s){1&n&&(t.j41(0,"div",30)(1,"mat-icon"),t.EFF(2,"badge"),t.k0s(),t.j41(3,"span"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631\u0629"),t.k0s()())}function z(n,s){if(1&n&&(t.j41(0,"mat-card",14)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"badge"),t.k0s(),t.EFF(5," \u0635\u0648\u0631\u0629 \u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",40),t.DNE(8,W,1,1,"img",41)(9,K,5,0,"div",18),t.k0s()()()),2&n){const i=t.XpG(2);t.R7$(8),t.Y8G("ngIf",i.shouldShowImage(i.visitor.idCardImageUrl)),t.R7$(),t.Y8G("ngIf",!i.shouldShowImage(i.visitor.idCardImageUrl))}}function J(n,s){if(1&n){const i=t.RV6();t.j41(0,"mat-card",43)(1,"mat-card-content")(2,"div",44)(3,"button",45),t.bIt("click",function(){t.eBV(i);const e=t.XpG(2);return t.Njj(e.checkout())}),t.j41(4,"mat-icon"),t.EFF(5,"logout"),t.k0s(),t.EFF(6," \u062a\u0633\u062c\u064a\u0644 \u062e\u0631\u0648\u062c "),t.k0s(),t.j41(7,"button",46),t.bIt("click",function(){t.eBV(i);const e=t.XpG(2);return t.Njj(e.rejectVisit())}),t.j41(8,"mat-icon"),t.EFF(9,"cancel"),t.k0s(),t.EFF(10," \u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629 "),t.k0s(),t.j41(11,"button",47),t.bIt("click",function(){t.eBV(i);const e=t.XpG(2);return t.Njj(e.blockVisitor())}),t.j41(12,"mat-icon"),t.EFF(13),t.k0s(),t.EFF(14),t.k0s()()()()}if(2&n){const i=t.XpG(2);t.R7$(11),t.Y8G("color",null!=i.visitor&&i.visitor.isBlocked?"accent":"warn"),t.R7$(2),t.JRh("block"),t.R7$(),t.SpI(" ",null!=i.visitor&&i.visitor.isBlocked?"\u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631":"\u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631"," ")}}function H(n,s){if(1&n){const i=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.goBack())}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h1"),t.EFF(6,"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0629"),t.k0s(),t.j41(7,"div",5)(8,"button",6),t.bIt("click",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.printVisit())}),t.j41(9,"mat-icon"),t.EFF(10,"print"),t.k0s()()()(),t.j41(11,"mat-card",7)(12,"mat-card-content")(13,"div",8)(14,"div",9)(15,"mat-icon",10),t.EFF(16,"confirmation_number"),t.k0s(),t.j41(17,"div")(18,"h2"),t.EFF(19),t.k0s(),t.j41(20,"p",11),t.EFF(21,"\u0631\u0642\u0645 \u0627\u0644\u0632\u064a\u0627\u0631\u0629"),t.k0s()()(),t.j41(22,"mat-chip",12)(23,"mat-icon"),t.EFF(24),t.k0s(),t.EFF(25),t.k0s()()()(),t.j41(26,"div",13)(27,"mat-card",14)(28,"mat-card-header")(29,"mat-card-title")(30,"mat-icon"),t.EFF(31,"person"),t.k0s(),t.EFF(32," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0632\u0627\u0626\u0631 "),t.k0s()(),t.j41(33,"mat-card-content")(34,"div",15)(35,"div",16),t.DNE(36,I,1,2,"img",17)(37,R,3,0,"div",18),t.k0s(),t.j41(38,"div",19)(39,"h3"),t.EFF(40),t.k0s(),t.DNE(41,V,5,1,"div",20)(42,w,5,1,"div",20)(43,A,5,1,"div",20),t.j41(44,"button",21),t.bIt("click",function(){t.eBV(i);const e=t.XpG();return t.Njj(e.viewVisitorProfile())}),t.j41(45,"mat-icon"),t.EFF(46,"visibility"),t.k0s(),t.EFF(47," \u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a "),t.k0s()()()()(),t.j41(48,"mat-card",14)(49,"mat-card-header")(50,"mat-card-title")(51,"mat-icon"),t.EFF(52,"info"),t.k0s(),t.EFF(53," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0629 "),t.k0s()(),t.j41(54,"mat-card-content")(55,"div",22)(56,"span",23),t.EFF(57,"\u0627\u0644\u0625\u062f\u0627\u0631\u0629:"),t.k0s(),t.j41(58,"mat-chip")(59,"mat-icon"),t.EFF(60,"business"),t.k0s(),t.EFF(61),t.k0s()(),t.j41(62,"div",22)(63,"span",23),t.EFF(64,"\u0627\u0644\u0645\u0648\u0638\u0641 \u0627\u0644\u0645\u0632\u0627\u0631:"),t.k0s(),t.j41(65,"span",24),t.EFF(66),t.k0s()(),t.DNE(67,T,5,1,"div",25)(68,$,5,1,"div",25),t.j41(69,"div",22)(70,"span",23),t.EFF(71,"\u0648\u0642\u062a \u0627\u0644\u062f\u062e\u0648\u0644:"),t.k0s(),t.j41(72,"span",24),t.EFF(73),t.k0s()(),t.DNE(74,G,5,1,"div",25),t.j41(75,"div",22)(76,"span",23),t.EFF(77,"\u0627\u0644\u0645\u062f\u0629:"),t.k0s(),t.j41(78,"mat-chip",26)(79,"mat-icon"),t.EFF(80,"timer"),t.k0s(),t.EFF(81),t.k0s()(),t.j41(82,"div",22)(83,"span",23),t.EFF(84,"\u062a\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0628\u0648\u0627\u0633\u0637\u0629:"),t.k0s(),t.j41(85,"span",24),t.EFF(86),t.k0s()(),t.DNE(87,B,5,1,"div",25)(88,y,5,1,"div",25),t.k0s()(),t.DNE(89,S,9,2,"mat-card",27)(90,z,10,2,"mat-card",27),t.k0s(),t.DNE(91,J,15,3,"mat-card",28),t.k0s()}if(2&n){const i=t.XpG();t.R7$(19),t.JRh(i.visit.visitNumber),t.R7$(3),t.Y8G("color",i.getStatusColor(i.visit.status)),t.R7$(2),t.JRh("checkedin"===(null==i.visit.status?null:i.visit.status.toLowerCase())?"schedule":"checkedout"===(null==i.visit.status?null:i.visit.status.toLowerCase())?"check_circle":"cancel"),t.R7$(),t.SpI(" ",i.getStatusLabel(i.visit.status)," "),t.R7$(11),t.Y8G("ngIf",i.shouldShowImage(null==i.visitor?null:i.visitor.personImageUrl)),t.R7$(),t.Y8G("ngIf",!i.shouldShowImage(null==i.visitor?null:i.visitor.personImageUrl)),t.R7$(3),t.JRh(i.visit.visitorName),t.R7$(),t.Y8G("ngIf",null==i.visitor?null:i.visitor.nationalId),t.R7$(),t.Y8G("ngIf",null==i.visitor?null:i.visitor.phone),t.R7$(),t.Y8G("ngIf",null==i.visitor?null:i.visitor.company),t.R7$(18),t.SpI(" ",i.visit.departmentName," "),t.R7$(5),t.JRh(i.visit.employeeToVisit),t.R7$(),t.Y8G("ngIf",i.visit.visitReason),t.R7$(),t.Y8G("ngIf",i.visit.expectedDurationHours),t.R7$(5),t.JRh(i.formatDate(i.visit.checkInAt)),t.R7$(),t.Y8G("ngIf",i.visit.checkOutAt),t.R7$(7),t.SpI(" ",i.getDuration()," "),t.R7$(5),t.JRh(i.visit.createdByUserName),t.R7$(),t.Y8G("ngIf",i.visit.rejectionReason),t.R7$(),t.Y8G("ngIf",i.visit.rejectedAt),t.R7$(),t.Y8G("ngIf",i.visit.carPlate||i.visit.carImageUrl),t.R7$(),t.Y8G("ngIf",null==i.visitor?null:i.visitor.idCardImageUrl),t.R7$(),t.Y8G("ngIf","checkedin"===(null==i.visit.status?null:i.visit.status.toLowerCase()))}}function Q(n,s){1&n&&(t.j41(0,"div",48),t.nrm(1,"mat-spinner",49),t.j41(2,"p"),t.EFF(3,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644..."),t.k0s()())}let Z=(()=>{class n{constructor(i,o,e,u,c,q){this.route=i,this.router=o,this.http=e,this.snackBar=u,this.dialog=c,this.visitorService=q,this.visit=null,this.visitor=null,this.isLoading=!0,this.destroy$=new E.B,this.failedImages=new Set}ngOnInit(){const i=this.route.snapshot.paramMap.get("visitNumber");i?(this.visitNumber=i,this.loadVisitDetails()):(this.showNotification("\u0631\u0642\u0645 \u0627\u0644\u0632\u064a\u0627\u0631\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error"),this.router.navigate(["/app/visitor-management/visits/active"]))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadVisitDetails(){this.isLoading=!0,this.http.get(`${f.c.apiUrl}/Visits/number/${this.visitNumber}`).pipe((0,p.Q)(this.destroy$)).subscribe({next:i=>{this.visit=i,this.loadVisitorDetails(i.visitorId)},error:i=>{console.error("Error loading visit:",i),this.showNotification("\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0629","error"),this.isLoading=!1,this.router.navigate(["/app/visitor-management/visits/active"])}})}loadVisitorDetails(i){this.http.get(`${f.c.apiUrl}/Visitors/${i}`).pipe((0,p.Q)(this.destroy$)).subscribe({next:o=>{this.visitor=o,this.isLoading=!1},error:o=>{console.error("Error loading visitor:",o),this.isLoading=!1}})}checkout(){this.visit&&confirm(`\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062a\u0633\u062c\u064a\u0644 \u062e\u0631\u0648\u062c ${this.visit.visitorName}\u061f`)&&this.http.post(`${f.c.apiUrl}/Visits/checkout/${this.visit.visitNumber}`,{}).pipe((0,p.Q)(this.destroy$)).subscribe({next:()=>{this.showNotification("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c \u0628\u0646\u062c\u0627\u062d","success"),this.loadVisitDetails()},error:i=>{console.error("Checkout error:",i),this.showNotification("\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c","error")}})}rejectVisit(){this.visit&&this.dialog.open(b,{width:"400px",direction:"rtl"}).afterClosed().subscribe(o=>{o&&this.http.post(`${f.c.apiUrl}/Visits/${this.visit.visitNumber}/reject`,{rejectionReason:o}).pipe((0,p.Q)(this.destroy$)).subscribe({next:()=>{this.showNotification("\u062a\u0645 \u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629 \u0628\u0646\u062c\u0627\u062d","success"),this.loadVisitDetails()},error:e=>{console.error("Reject error:",e),this.showNotification("\u0641\u0634\u0644 \u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629","error")}})})}viewVisitorProfile(){this.visit&&this.router.navigate(["/app/visitor-management/visitors/profile",this.visit.visitorId])}blockVisitor(){!this.visit||!this.visitor||(this.visitor.isBlocked?confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631 \u0647\u0630\u0627 \u0627\u0644\u0632\u0627\u0626\u0631\u061f")&&this.performBlockAction(!1,null):this.dialog.open(F,{width:"400px",direction:"rtl"}).afterClosed().subscribe(o=>{o&&this.performBlockAction(!0,o)}))}performBlockAction(i,o){!this.visit||!this.visitor||this.visitorService.blockVisitor(this.visitor.id,i,o).pipe((0,p.Q)(this.destroy$)).subscribe({next:()=>{this.showNotification(i?"\u062a\u0645 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 \u0628\u0646\u062c\u0627\u062d":"\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 \u0628\u0646\u062c\u0627\u062d","success"),this.loadVisitorDetails(this.visit.visitorId)},error:e=>{console.error("Error updating block status:",e),this.showNotification("\u0641\u0634\u0644 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0638\u0631","error")}})}viewCarImage(){this.visit?.carImageUrl&&window.open(this.visit.carImageUrl,"_blank")}printVisit(){window.print()}goBack(){this.router.navigate(["/app/visitor-management/visits/active"])}formatDate(i){return i?new Date(i).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}formatTime(i){return i?new Date(i).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"-"}getDuration(){if(!this.visit?.checkInAt)return"-";const i=new Date(this.visit.checkInAt),e=(this.visit.checkOutAt?new Date(this.visit.checkOutAt):new Date).getTime()-i.getTime(),u=Math.floor(e/36e5),c=Math.floor(e%36e5/6e4);return u>0?`${u}\u0633 ${c}\u062f`:`${c}\u062f`}getStatusLabel(i){switch(i?.toLowerCase()){case"checkedin":case"ongoing":return"\u062c\u0627\u0631\u064a\u0629";case"checkedout":case"completed":return"\u0645\u0643\u062a\u0645\u0644\u0629";case"rejected":return"\u0645\u0631\u0641\u0648\u0636\u0629";default:return i||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641"}}getStatusColor(i){switch(i?.toLowerCase()){case"checkedin":case"ongoing":return"primary";case"checkedout":case"completed":return"accent";case"rejected":return"warn";default:return""}}getImageUrl(i){return i&&""!==i.trim()?(i.startsWith("http://")||i.startsWith("https://"),i):null}hasImage(i){return null!=i&&""!==i.trim()}shouldShowImage(i){return!!this.hasImage(i)&&!this.failedImages.has(i||"")}onImageError(i){i&&this.failedImages.add(i)}showNotification(i,o="info"){this.snackBar.open(i,"\u0625\u063a\u0644\u0627\u0642",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:[`snackbar-${o}`]})}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(k.nX),t.rXU(k.Ix),t.rXU(j.Qq),t.rXU(P.UG),t.rXU(r.bZ),t.rXU(D.h))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-visit-details"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[["class","visit-details-container","style","margin-top: 70px;",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"visit-details-container",2,"margin-top","70px"],[1,"details-header"],["mat-icon-button","","matTooltip","\u0631\u062c\u0648\u0639",3,"click"],[1,"header-actions"],["mat-icon-button","","matTooltip","\u0637\u0628\u0627\u0639\u0629",3,"click"],[1,"status-card"],[1,"status-header"],[1,"visit-number-section"],[1,"large-icon"],[1,"subtitle"],[1,"status-chip-large",3,"color"],[1,"content-grid"],[1,"info-card"],[1,"visitor-profile-section"],[1,"visitor-image-container"],["class","visitor-image",3,"src","alt","error",4,"ngIf"],["class","image-placeholder",4,"ngIf"],[1,"visitor-info"],["class","info-item",4,"ngIf"],["mat-stroked-button","","color","primary",1,"profile-btn",3,"click"],[1,"detail-item"],[1,"label"],[1,"value"],["class","detail-item",4,"ngIf"],["color","primary"],["class","info-card",4,"ngIf"],["class","actions-card",4,"ngIf"],[1,"visitor-image",3,"error","src","alt"],[1,"image-placeholder"],[1,"info-item"],[1,"value","rejection-reason"],["class","car-image-section",4,"ngIf"],["color","accent"],[1,"car-image-section"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0633\u064a\u0627\u0631\u0629","class","car-image",3,"src","error","click",4,"ngIf"],["mat-stroked-button","","class","view-image-btn",3,"click",4,"ngIf"],["alt","\u0635\u0648\u0631\u0629 \u0627\u0644\u0633\u064a\u0627\u0631\u0629",1,"car-image",3,"error","click","src"],["mat-stroked-button","",1,"view-image-btn",3,"click"],[1,"id-card-section"],["alt","\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0647\u0648\u064a\u0629","class","id-card-image",3,"src","error",4,"ngIf"],["alt","\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0647\u0648\u064a\u0629",1,"id-card-image",3,"error","src"],[1,"actions-card"],[1,"actions-grid"],["mat-raised-button","","color","primary",1,"action-btn",3,"click"],["mat-raised-button","","color","warn",1,"action-btn",3,"click"],["mat-raised-button","",1,"action-btn",3,"click","color"],[1,"loading-container"],["diameter","60"]],template:function(o,e){1&o&&t.DNE(0,H,92,23,"div",0)(1,Q,4,0,"div",1),2&o&&(t.Y8G("ngIf",e.visit),t.R7$(),t.Y8G("ngIf",e.isLoading))},dependencies:[h.MD,h.bT,g.Hu,g.RN,g.m2,g.MM,g.dh,_.Hl,_.$z,_.iY,C.m_,C.An,x.YN,x.Jl,M.D6,M.LG,P._T,O.uc,O.oV,r.hM,d.RG,m.fS,l.YN],styles:[".visit-details-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.details-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px}.details-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{flex:1;margin:0;font-size:28px;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.details-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.status-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 8px 32px #667eea26;border-radius:20px}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .visit-number-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .visit-number-section[_ngcontent-%COMP%]   .large-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#667eea}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .visit-number-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:32px;font-weight:700;color:#333}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .visit-number-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .status-chip-large[_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;font-weight:600;height:auto}.status-card[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .status-chip-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:24px;margin-bottom:24px}.info-card[_ngcontent-%COMP%]{box-shadow:0 4px 16px #0000001a;border-radius:16px;transition:all .3s ease}.info-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 24px #00000026;transform:translateY(-2px)}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;color:#667eea;font-weight:600}.info-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea}.visitor-profile-section[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:flex-start}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-image-container[_ngcontent-%COMP%]{flex-shrink:0}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-image-container[_ngcontent-%COMP%]   .visitor-image[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;object-fit:cover;border:4px solid #667eea;box-shadow:0 4px 12px #667eea4d}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-image-container[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea1a,#764ba21a);border:4px solid #667eea}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-image-container[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:60px;width:60px;height:60px;color:#667eea}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]{flex:1}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:24px;font-weight:600;color:#333}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;color:#666}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:20px;width:20px;height:20px}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]   .profile-btn[_ngcontent-%COMP%]{margin-top:16px;width:100%}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:600;color:#666;min-width:120px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;text-align:right;flex:1}.detail-item[_ngcontent-%COMP%]   .rejection-reason[_ngcontent-%COMP%]{color:#d32f2f;font-weight:500}.detail-item[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-weight:500}.car-image-section[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.car-image-section[_ngcontent-%COMP%]   .car-image[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border-radius:12px;box-shadow:0 4px 12px #0000001a;cursor:pointer;transition:all .3s ease}.car-image-section[_ngcontent-%COMP%]   .car-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 8px 24px #00000026}.car-image-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]{width:100%;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:12px;border:2px dashed rgba(102,126,234,.3)}.car-image-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#667eea;margin-bottom:8px}.car-image-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.car-image-section[_ngcontent-%COMP%]   .view-image-btn[_ngcontent-%COMP%]{margin-top:12px}.id-card-section[_ngcontent-%COMP%]{text-align:center}.id-card-section[_ngcontent-%COMP%]   .id-card-image[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:12px;box-shadow:0 4px 12px #0000001a}.id-card-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]{width:100%;height:250px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:12px;border:2px dashed rgba(102,126,234,.3)}.id-card-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#667eea;margin-bottom:8px}.id-card-section[_ngcontent-%COMP%]   .image-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.actions-card[_ngcontent-%COMP%]{box-shadow:0 4px 16px #0000001a;border-radius:16px}.actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]{padding:16px 24px;font-size:16px;font-weight:600;height:auto}.actions-card[_ngcontent-%COMP%]   .actions-grid[_ngcontent-%COMP%]   .action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px;gap:24px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#667eea;font-size:18px;font-weight:600}@media (max-width: 768px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.visitor-profile-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.visitor-profile-section[_ngcontent-%COMP%]   .visitor-info[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{justify-content:center}.detail-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{text-align:left}}"]})}}return n})(),b=(()=>{class n{constructor(i){this.dialogRef=i,this.rejectionReason=""}onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close(this.rejectionReason)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(r.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-reject-visit-dialog"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[["mat-dialog-title",""],["appearance","outline",1,"full-width"],["matInput","","rows","4","placeholder","\u0623\u062f\u062e\u0644 \u0633\u0628\u0628 \u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click","disabled"]],template:function(o,e){1&o&&(t.j41(0,"h2",0),t.EFF(1,"\u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),t.EFF(5,"\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636"),t.k0s(),t.j41(6,"textarea",2),t.mxI("ngModelChange",function(c){return t.DH7(e.rejectionReason,c)||(e.rejectionReason=c),c}),t.k0s()()(),t.j41(7,"mat-dialog-actions",3)(8,"button",4),t.bIt("click",function(){return e.onCancel()}),t.EFF(9,"\u0625\u0644\u063a\u0627\u0621"),t.k0s(),t.j41(10,"button",5),t.bIt("click",function(){return e.onConfirm()}),t.EFF(11," \u0631\u0641\u0636 \u0627\u0644\u0632\u064a\u0627\u0631\u0629 "),t.k0s()()),2&o&&(t.R7$(6),t.R50("ngModel",e.rejectionReason),t.R7$(4),t.Y8G("disabled",!e.rejectionReason||""===e.rejectionReason.trim()))},dependencies:[h.MD,r.hM,r.BI,r.E7,r.Yi,d.RG,d.rl,d.nJ,m.fS,m.fg,_.Hl,_.$z,l.YN,l.me,l.BC,l.vS],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})}}return n})(),F=(()=>{class n{constructor(i,o){this.dialogRef=i,this.data=o,this.blockReason=""}onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close(this.blockReason)}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(r.CP),t.rXU(r.Vh))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-block-visitor-dialog"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[["mat-dialog-title",""],["appearance","outline",1,"full-width"],["matInput","","rows","4","placeholder","\u0623\u062f\u062e\u0644 \u0633\u0628\u0628 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click","disabled"]],template:function(o,e){1&o&&(t.j41(0,"h2",0),t.EFF(1,"\u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),t.EFF(5,"\u0633\u0628\u0628 \u0627\u0644\u062d\u0638\u0631"),t.k0s(),t.j41(6,"textarea",2),t.mxI("ngModelChange",function(c){return t.DH7(e.blockReason,c)||(e.blockReason=c),c}),t.k0s()()(),t.j41(7,"mat-dialog-actions",3)(8,"button",4),t.bIt("click",function(){return e.onCancel()}),t.EFF(9,"\u0625\u0644\u063a\u0627\u0621"),t.k0s(),t.j41(10,"button",5),t.bIt("click",function(){return e.onConfirm()}),t.EFF(11," \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 "),t.k0s()()),2&o&&(t.R7$(6),t.R50("ngModel",e.blockReason),t.R7$(4),t.Y8G("disabled",!e.blockReason||""===e.blockReason.trim()))},dependencies:[h.MD,r.hM,r.BI,r.E7,r.Yi,d.RG,d.rl,d.nJ,m.fS,m.fg,_.Hl,_.$z,l.YN,l.me,l.BC,l.vS],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})}}return n})()}}]);