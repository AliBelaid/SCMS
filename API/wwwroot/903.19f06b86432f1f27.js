"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[903],{7903:(xt,M,r)=>{r.r(M),r.d(M,{BlockVisitorDialogComponent:()=>I,VisitorProfileComponent:()=>Ot});var f=r(177),m=r(5596),p=r(8834),O=r(9213),x=r(6471),C=r(6850),b=r(9183),v=r(5416),s=r(9159),y=r(4823),_=r(4006),h=r(2102),P=r(9631),u=r(9417),w=r(1413),k=r(6977),g=r(9969),t=r(4438),F=r(9192),D=r(6964);function V(n,o){if(1&n){const e=t.RV6();t.j41(0,"img",48),t.bIt("error",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.onImageError(a.profile.profileImageUrl||a.profile.visitor.personImageUrl))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("src",e.getImageUrl(e.profile.profileImageUrl||e.profile.visitor.personImageUrl),t.B4B)("alt",e.profile.visitor.fullName)}}function T(n,o){1&n&&(t.j41(0,"div",49)(1,"mat-icon"),t.EFF(2,"person"),t.k0s()())}function $(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"badge"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0637\u0646\u064a:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.profile.visitor.nationalId)}}function G(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"phone"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0627\u0644\u0647\u0627\u062a\u0641:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.profile.visitor.phone)}}function A(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"business"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0627\u0644\u0634\u0631\u0643\u0629:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.profile.visitor.company)}}function B(n,o){if(1&n&&(t.j41(0,"div",21)(1,"mat-icon",22),t.EFF(2,"schedule"),t.k0s(),t.j41(3,"div",23),t.EFF(4),t.k0s(),t.j41(5,"div",24),t.EFF(6,"\u062c\u0627\u0631\u064a\u0629"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.profile.ongoingVisits)}}function Y(n,o){if(1&n&&(t.j41(0,"div",21)(1,"mat-icon",22),t.EFF(2,"timer"),t.k0s(),t.j41(3,"div",23),t.EFF(4),t.k0s(),t.j41(5,"div",24),t.EFF(6,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u062f\u0629"),t.k0s()()),2&n){const e=t.XpG(2);t.R7$(4),t.JRh(e.formatDuration(e.profile.averageVisitDurationMinutes))}}function N(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"medical_services"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0637\u0628\u064a\u0629:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.profile.visitor.medicalNotes)}}function U(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"event"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0623\u0648\u0644 \u0632\u064a\u0627\u0631\u0629:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.formatDate(e.profile.firstVisitDate))}}function X(n,o){if(1&n&&(t.j41(0,"div",17)(1,"mat-icon"),t.EFF(2,"event_available"),t.k0s(),t.j41(3,"div")(4,"span",18),t.EFF(5,"\u0622\u062e\u0631 \u0632\u064a\u0627\u0631\u0629:"),t.k0s(),t.j41(6,"span",19),t.EFF(7),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(7),t.JRh(e.formatDate(e.profile.lastVisitDate))}}function z(n,o){if(1&n&&(t.j41(0,"div",53)(1,"div",54)(2,"span",55),t.EFF(3),t.k0s(),t.j41(4,"span",56),t.EFF(5),t.k0s()(),t.j41(6,"div",57),t.nrm(7,"div",58),t.k0s(),t.j41(8,"div",59),t.EFF(9),t.k0s()()),2&n){const e=o.$implicit;t.R7$(3),t.JRh(e.departmentName),t.R7$(2),t.SpI("",e.visitCount," \u0632\u064a\u0627\u0631\u0629"),t.R7$(2),t.xc7("width",e.percentage,"%"),t.R7$(2),t.SpI("",e.percentage.toFixed(1),"%")}}function L(n,o){if(1&n&&(t.j41(0,"mat-card",50)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"bar_chart"),t.k0s(),t.EFF(5," \u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0627\u0644\u0625\u062f\u0627\u0631\u0627\u062a "),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",51),t.DNE(8,z,10,5,"div",52),t.k0s()()()),2&n){const e=t.XpG(2);t.R7$(8),t.Y8G("ngForOf",e.profile.departmentStats)}}function S(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0631\u0642\u0645 \u0627\u0644\u0632\u064a\u0627\u0631\u0629"),t.k0s())}function J(n,o){if(1&n){const e=t.RV6();t.j41(0,"td",61)(1,"button",62),t.bIt("click",function(){const a=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(l.viewVisit(a.visitNumber))}),t.EFF(2),t.k0s()()}if(2&n){const e=o.$implicit;t.R7$(2),t.SpI(" ",e.visitNumber," ")}}function W(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0627\u0644\u0625\u062f\u0627\u0631\u0629"),t.k0s())}function K(n,o){if(1&n&&(t.j41(0,"td",61)(1,"mat-chip"),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(e.departmentName)}}function H(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0627\u0644\u0645\u0648\u0638\u0641"),t.k0s())}function Z(n,o){if(1&n&&(t.j41(0,"td",61),t.EFF(1),t.k0s()),2&n){const e=o.$implicit;t.R7$(),t.JRh(e.employeeToVisit)}}function Q(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0648\u0642\u062a \u0627\u0644\u062f\u062e\u0648\u0644"),t.k0s())}function q(n,o){if(1&n&&(t.j41(0,"td",61),t.EFF(1),t.k0s()),2&n){const e=o.$implicit,i=t.XpG(2);t.R7$(),t.JRh(i.formatDate(e.checkInAt))}}function tt(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0648\u0642\u062a \u0627\u0644\u062e\u0631\u0648\u062c"),t.k0s())}function et(n,o){if(1&n&&(t.j41(0,"td",61),t.EFF(1),t.k0s()),2&n){const e=o.$implicit,i=t.XpG(2);t.R7$(),t.JRh(i.formatDate(e.checkOutAt))}}function nt(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0627\u0644\u0645\u062f\u0629"),t.k0s())}function it(n,o){if(1&n&&(t.j41(0,"td",61),t.EFF(1),t.k0s()),2&n){const e=o.$implicit,i=t.XpG(2);t.R7$(),t.JRh(i.formatDuration(e.durationMinutes))}}function at(n,o){1&n&&(t.j41(0,"th",60),t.EFF(1,"\u0627\u0644\u062d\u0627\u0644\u0629"),t.k0s())}function ot(n,o){if(1&n&&(t.j41(0,"td",61)(1,"mat-chip",63),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit,i=t.XpG(2);t.R7$(),t.Y8G("color",i.getStatusColor(e.status)),t.R7$(),t.SpI(" ",i.getStatusLabel(e.status)," ")}}function rt(n,o){1&n&&t.nrm(0,"tr",64)}function lt(n,o){1&n&&t.nrm(0,"tr",65)}function ct(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",80),t.bIt("click",function(){t.eBV(e);const a=t.XpG(3);return t.Njj(a.previousImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_right"),t.k0s()()}}function st(n,o){if(1&n){const e=t.RV6();t.j41(0,"img",81),t.bIt("error",function(){let a;t.eBV(e);const l=t.XpG(3);return t.Njj(l.onImageError(null==(a=l.getCurrentImage())?null:a.imageUrl))}),t.k0s()}if(2&n){let e,i;const a=t.XpG(3);t.Y8G("src",a.getImageUrl(null==(e=a.getCurrentImage())?null:e.imageUrl),t.B4B)("alt",null==(i=a.getCurrentImage())?null:i.visitInfo)}}function gt(n,o){1&n&&(t.j41(0,"div",82)(1,"mat-icon"),t.EFF(2,"image"),t.k0s(),t.j41(3,"span"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631\u0629"),t.k0s()())}function dt(n,o){if(1&n&&(t.j41(0,"div",75)(1,"mat-icon"),t.EFF(2,"directions_car"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&n){let e;const i=t.XpG(3);t.R7$(4),t.JRh(null==(e=i.getCurrentImage())?null:e.carPlate)}}function _t(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",83),t.bIt("click",function(){t.eBV(e);const a=t.XpG(3);return t.Njj(a.nextImage())}),t.j41(1,"mat-icon"),t.EFF(2,"chevron_left"),t.k0s()()}}function mt(n,o){if(1&n){const e=t.RV6();t.j41(0,"img",90),t.bIt("error",function(){t.eBV(e);const a=t.XpG().$implicit,l=t.XpG(4);return t.Njj(l.onImageError(a.imageUrl))}),t.k0s()}if(2&n){const e=t.XpG().$implicit,i=t.XpG(4);t.Y8G("src",i.getImageUrl(e.imageUrl),t.B4B)("alt",e.visitInfo)}}function pt(n,o){if(1&n&&(t.j41(0,"div",91)(1,"mat-icon"),t.EFF(2),t.k0s()()),2&n){const e=t.XpG().$implicit,i=t.XpG(4);t.R7$(2),t.JRh(i.getImageTypeIcon(e.imageType))}}function ut(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",86),t.bIt("click",function(){const a=t.eBV(e).index,l=t.XpG(4);return t.Njj(l.goToImage(a))}),t.DNE(1,mt,1,2,"img",87)(2,pt,3,1,"div",88),t.j41(3,"div",89)(4,"mat-icon"),t.EFF(5),t.k0s()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.XpG(4);t.AVh("active",a.currentImageIndex===i),t.R7$(),t.Y8G("ngIf",a.shouldShowImage(e.imageUrl)),t.R7$(),t.Y8G("ngIf",!a.shouldShowImage(e.imageUrl)),t.R7$(3),t.JRh(a.getImageTypeIcon(e.imageType))}}function ft(n,o){if(1&n&&(t.j41(0,"div",84),t.DNE(1,ut,6,5,"div",85),t.k0s()),2&n){const e=t.XpG(3);t.R7$(),t.Y8G("ngForOf",e.profile.imageGallery)}}function ht(n,o){if(1&n&&(t.j41(0,"mat-card",66)(1,"mat-card-header")(2,"mat-card-title")(3,"mat-icon"),t.EFF(4,"photo_library"),t.k0s(),t.EFF(5),t.k0s()(),t.j41(6,"mat-card-content")(7,"div",67),t.DNE(8,ct,3,0,"div",68),t.j41(9,"div",69),t.DNE(10,st,1,2,"img",70)(11,gt,5,0,"div",71),t.j41(12,"div",72)(13,"div",73)(14,"mat-icon"),t.EFF(15),t.k0s(),t.j41(16,"span"),t.EFF(17),t.k0s()(),t.j41(18,"div",74)(19,"div",75)(20,"mat-icon"),t.EFF(21,"confirmation_number"),t.k0s(),t.j41(22,"span"),t.EFF(23),t.k0s()(),t.j41(24,"div",75)(25,"mat-icon"),t.EFF(26,"event"),t.k0s(),t.j41(27,"span"),t.EFF(28),t.k0s()(),t.j41(29,"div",75)(30,"mat-icon"),t.EFF(31,"info"),t.k0s(),t.j41(32,"span"),t.EFF(33),t.k0s()(),t.DNE(34,dt,5,1,"div",76),t.k0s()()(),t.DNE(35,_t,3,0,"div",77),t.k0s(),t.DNE(36,ft,2,1,"div",78),t.j41(37,"div",79),t.EFF(38),t.k0s()()()),2&n){let e,i,a,l,d,E,R,j;const c=t.XpG(2);t.R7$(5),t.SpI(" \u0645\u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631 (",c.profile.imageGallery.length,") "),t.R7$(3),t.Y8G("ngIf",c.profile.imageGallery.length>1),t.R7$(2),t.Y8G("ngIf",c.shouldShowImage(null==(e=c.getCurrentImage())?null:e.imageUrl)),t.R7$(),t.Y8G("ngIf",!c.shouldShowImage(null==(i=c.getCurrentImage())?null:i.imageUrl)),t.R7$(4),t.JRh(c.getImageTypeIcon((null==(a=c.getCurrentImage())?null:a.imageType)||0)),t.R7$(2),t.JRh(c.getImageTypeLabel((null==(l=c.getCurrentImage())?null:l.imageType)||0)),t.R7$(6),t.JRh(null==(d=c.getCurrentImage())?null:d.visitNumber),t.R7$(5),t.JRh(c.formatDate(null==(E=c.getCurrentImage())?null:E.visitDate)),t.R7$(5),t.JRh(null==(R=c.getCurrentImage())?null:R.visitInfo),t.R7$(),t.Y8G("ngIf",null==(j=c.getCurrentImage())?null:j.carPlate),t.R7$(),t.Y8G("ngIf",c.profile.imageGallery.length>1),t.R7$(),t.Y8G("ngIf",c.profile.imageGallery.length>1),t.R7$(2),t.Lme(" ",c.currentImageIndex+1," / ",c.profile.imageGallery.length," ")}}function Ct(n,o){1&n&&(t.j41(0,"mat-card",66)(1,"mat-card-content")(2,"div",92)(3,"mat-icon"),t.EFF(4,"photo_library"),t.k0s(),t.j41(5,"p"),t.EFF(6,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0648\u0631 \u0645\u062a\u0627\u062d\u0629"),t.k0s()()()())}function Pt(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"button",4),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.goBack())}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h1"),t.EFF(6,"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a \u0644\u0644\u0632\u0627\u0626\u0631"),t.k0s()(),t.j41(7,"mat-card",5)(8,"div",6)(9,"div",7)(10,"div",8),t.DNE(11,V,1,2,"img",9)(12,T,3,0,"div",10),t.k0s(),t.j41(13,"div",11)(14,"mat-chip",12)(15,"mat-icon"),t.EFF(16),t.k0s(),t.EFF(17),t.k0s(),t.j41(18,"button",13),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.toggleBlockStatus())}),t.j41(19,"mat-icon"),t.EFF(20),t.k0s(),t.EFF(21),t.k0s()()(),t.j41(22,"div",14)(23,"h2"),t.EFF(24),t.k0s(),t.j41(25,"div",15),t.DNE(26,$,8,1,"div",16)(27,G,8,1,"div",16)(28,A,8,1,"div",16),t.j41(29,"div",17)(30,"mat-icon"),t.EFF(31,"calendar_today"),t.k0s(),t.j41(32,"div")(33,"span",18),t.EFF(34,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0633\u062c\u064a\u0644:"),t.k0s(),t.j41(35,"span",19),t.EFF(36),t.k0s()()()()(),t.j41(37,"div",20)(38,"div",21)(39,"mat-icon",22),t.EFF(40,"history"),t.k0s(),t.j41(41,"div",23),t.EFF(42),t.k0s(),t.j41(43,"div",24),t.EFF(44,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a"),t.k0s()(),t.j41(45,"div",21)(46,"mat-icon",22),t.EFF(47,"check_circle"),t.k0s(),t.j41(48,"div",23),t.EFF(49),t.k0s(),t.j41(50,"div",24),t.EFF(51,"\u0645\u0643\u062a\u0645\u0644\u0629"),t.k0s()(),t.DNE(52,B,7,1,"div",25)(53,Y,7,1,"div",25),t.k0s()()(),t.j41(54,"mat-tab-group",26),t.mxI("selectedIndexChange",function(a){t.eBV(e);const l=t.XpG();return t.DH7(l.selectedTabIndex,a)||(l.selectedTabIndex=a),t.Njj(a)}),t.j41(55,"mat-tab",27)(56,"div",28)(57,"mat-card",29)(58,"mat-card-header")(59,"mat-card-title")(60,"mat-icon"),t.EFF(61,"info"),t.k0s(),t.EFF(62," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 "),t.k0s()(),t.j41(63,"mat-card-content"),t.DNE(64,N,8,1,"div",16)(65,U,8,1,"div",16)(66,X,8,1,"div",16),t.k0s()(),t.DNE(67,L,9,1,"mat-card",30),t.k0s()(),t.j41(68,"mat-tab",31)(69,"div",28)(70,"mat-card",32)(71,"mat-card-header")(72,"mat-card-title")(73,"mat-icon"),t.EFF(74,"history"),t.k0s(),t.EFF(75),t.k0s()(),t.j41(76,"mat-card-content")(77,"div",33)(78,"table",34),t.qex(79,35),t.DNE(80,S,2,0,"th",36)(81,J,3,1,"td",37),t.bVm(),t.qex(82,38),t.DNE(83,W,2,0,"th",36)(84,K,3,1,"td",37),t.bVm(),t.qex(85,39),t.DNE(86,H,2,0,"th",36)(87,Z,2,1,"td",37),t.bVm(),t.qex(88,40),t.DNE(89,Q,2,0,"th",36)(90,q,2,1,"td",37),t.bVm(),t.qex(91,41),t.DNE(92,tt,2,0,"th",36)(93,et,2,1,"td",37),t.bVm(),t.qex(94,42),t.DNE(95,nt,2,0,"th",36)(96,it,2,1,"td",37),t.bVm(),t.qex(97,43),t.DNE(98,at,2,0,"th",36)(99,ot,3,2,"td",37),t.bVm(),t.DNE(100,rt,1,0,"tr",44)(101,lt,1,0,"tr",45),t.k0s()()()()()(),t.j41(102,"mat-tab",46)(103,"div",28),t.DNE(104,ht,39,14,"mat-card",47)(105,Ct,7,0,"mat-card",47),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(11),t.Y8G("ngIf",e.shouldShowImage(e.profile.profileImageUrl||e.profile.visitor.personImageUrl)),t.R7$(),t.Y8G("ngIf",!e.shouldShowImage(e.profile.profileImageUrl||e.profile.visitor.personImageUrl)),t.R7$(2),t.Y8G("color",e.profile.visitor.isBlocked?"warn":"primary"),t.R7$(2),t.JRh(e.profile.visitor.isBlocked?"block":"check_circle"),t.R7$(),t.SpI(" ",e.profile.visitor.isBlocked?"\u0645\u062d\u0638\u0648\u0631":"\u0646\u0634\u0637"," "),t.R7$(),t.Y8G("color",e.profile.visitor.isBlocked?"primary":"warn"),t.R7$(2),t.JRh(e.profile.visitor.isBlocked?"check_circle":"block"),t.R7$(),t.SpI(" ",e.profile.visitor.isBlocked?"\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u062d\u0638\u0631":"\u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631"," "),t.R7$(3),t.JRh(e.profile.visitor.fullName),t.R7$(2),t.Y8G("ngIf",e.profile.visitor.nationalId),t.R7$(),t.Y8G("ngIf",e.profile.visitor.phone),t.R7$(),t.Y8G("ngIf",e.profile.visitor.company),t.R7$(8),t.JRh(e.formatDate(e.profile.visitor.createdAt)),t.R7$(6),t.JRh(e.profile.totalVisits),t.R7$(7),t.JRh(e.profile.completedVisits),t.R7$(3),t.Y8G("ngIf",e.profile.ongoingVisits>0),t.R7$(),t.Y8G("ngIf",e.profile.averageVisitDurationMinutes),t.R7$(),t.R50("selectedIndex",e.selectedTabIndex),t.R7$(10),t.Y8G("ngIf",e.profile.visitor.medicalNotes),t.R7$(),t.Y8G("ngIf",e.profile.firstVisitDate),t.R7$(),t.Y8G("ngIf",e.profile.lastVisitDate),t.R7$(),t.Y8G("ngIf",e.profile.departmentStats.length>0),t.R7$(8),t.SpI(" \u0633\u062c\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a (",e.profile.visitHistory.length,") "),t.R7$(3),t.Y8G("dataSource",e.profile.visitHistory),t.R7$(22),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(3),t.Y8G("ngIf",e.profile.imageGallery.length>0),t.R7$(),t.Y8G("ngIf",0===e.profile.imageGallery.length)}}function Mt(n,o){1&n&&(t.j41(0,"div",93),t.nrm(1,"mat-spinner",94),t.j41(2,"p"),t.EFF(3,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a..."),t.k0s()())}let Ot=(()=>{class n{constructor(e,i,a,l,d){this.route=e,this.router=i,this.visitorService=a,this.snackBar=l,this.dialog=d,this.profile=null,this.isLoading=!0,this.selectedTabIndex=0,this.currentImageIndex=0,this.displayedColumns=["visitNumber","departmentName","employeeToVisit","checkInAt","checkOutAt","duration","status"],this.destroy$=new w.B,this.failedImages=new Set}ngOnInit(){const e=this.route.snapshot.paramMap.get("id");e?(this.visitorId=+e,this.loadProfile()):(this.showNotification("\u0645\u0639\u0631\u0641 \u0627\u0644\u0632\u0627\u0626\u0631 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error"),this.router.navigate(["/app/visitor-management/visitors"]));const i=this.route.snapshot.queryParamMap.get("tab");"history"===i?this.selectedTabIndex=1:"gallery"===i&&(this.selectedTabIndex=2)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadProfile(){this.isLoading=!0,this.visitorService.getVisitorProfileDetailed(this.visitorId).pipe((0,k.Q)(this.destroy$)).subscribe({next:e=>{this.profile=e,this.isLoading=!1},error:e=>{console.error("Error loading visitor profile:",e),this.showNotification("\u0641\u0634\u0644 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a","error"),this.isLoading=!1,this.router.navigate(["/app/visitor-management/visitors"])}})}nextImage(){this.profile&&this.profile.imageGallery.length>0&&(this.currentImageIndex=(this.currentImageIndex+1)%this.profile.imageGallery.length)}previousImage(){this.profile&&this.profile.imageGallery.length>0&&(this.currentImageIndex=0===this.currentImageIndex?this.profile.imageGallery.length-1:this.currentImageIndex-1)}goToImage(e){this.currentImageIndex=e}getCurrentImage(){return this.profile&&0!==this.profile.imageGallery.length?this.profile.imageGallery[this.currentImageIndex]:null}getImageTypeLabel(e){switch(e){case 1:return"\u0635\u0648\u0631\u0629 \u0634\u062e\u0635\u064a\u0629";case 2:return"\u0628\u0637\u0627\u0642\u0629 \u0647\u0648\u064a\u0629";case 3:return"\u0635\u0648\u0631\u0629 \u0633\u064a\u0627\u0631\u0629";default:return"\u0635\u0648\u0631\u0629"}}getImageTypeIcon(e){switch(e){case 1:return"person";case 2:return"badge";case 3:return"directions_car";default:return"image"}}formatDate(e){return e?new Date(e).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}formatTime(e){return e?new Date(e).toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"-"}formatDuration(e){if(!e)return"-";const i=Math.floor(e/60),a=e%60;return i>0?`${i}\u0633 ${a}\u062f`:`${a}\u062f`}getStatusLabel(e){switch(e){case"ongoing":return"\u062c\u0627\u0631\u064a\u0629";case"completed":return"\u0645\u0643\u062a\u0645\u0644\u0629";case"incomplete":return"\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644\u0629";case"cancelled":return"\u0645\u0644\u063a\u0627\u0629";default:return e}}getStatusColor(e){switch(e){case"ongoing":return"primary";case"completed":return"accent";case"incomplete":return"warn";default:return""}}getImageUrl(e){return e&&""!==e.trim()?(e.startsWith("http://")||e.startsWith("https://"),e):null}hasImage(e){return null!=e&&""!==e.trim()}shouldShowImage(e){return!!this.hasImage(e)&&!this.failedImages.has(e||"")}onImageError(e){e&&this.failedImages.add(e)}viewVisit(e){this.router.navigate(["/app/visitor-management/visits/details",e])}goBack(){this.router.navigate(["/app/visitor-management/visitors"])}toggleBlockStatus(){if(!this.profile)return;const e=!this.profile.visitor.isBlocked;e?this.dialog.open(I,{width:"400px",direction:"rtl"}).afterClosed().subscribe(l=>{l&&this.performBlockAction(!0,l)}):confirm(`\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 ${e?"\u062d\u0638\u0631":"\u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631"} \u0647\u0630\u0627 \u0627\u0644\u0632\u0627\u0626\u0631\u061f`)&&this.performBlockAction(!1,null)}performBlockAction(e,i){this.profile&&this.visitorService.blockVisitor(this.visitorId,e,i).pipe((0,k.Q)(this.destroy$)).subscribe({next:()=>{this.showNotification(e?"\u062a\u0645 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 \u0628\u0646\u062c\u0627\u062d":"\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 \u0628\u0646\u062c\u0627\u062d","success"),this.loadProfile()},error:a=>{console.error("Error updating block status:",a),this.showNotification("\u0641\u0634\u0644 \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0638\u0631","error")}})}showNotification(e,i="info"){this.snackBar.open(e,"\u0625\u063a\u0644\u0627\u0642",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:[`snackbar-${i}`]})}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(F.nX),t.rXU(F.Ix),t.rXU(D.h),t.rXU(v.UG),t.rXU(_.bZ))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-visitor-profile"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[["class","visitor-profile-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"visitor-profile-container"],[1,"profile-header"],["mat-icon-button","","matTooltip","\u0631\u062c\u0648\u0639",3,"click"],[1,"profile-summary-card"],[1,"profile-header-section"],[1,"profile-image-section"],[1,"profile-image-container"],["class","profile-image-large",3,"src","alt","error",4,"ngIf"],["class","profile-image-placeholder-large",4,"ngIf"],[1,"status-actions"],[1,"status-badge",3,"color"],["mat-raised-button","",1,"block-btn",3,"click","color"],[1,"profile-info-section"],[1,"info-grid"],["class","info-item",4,"ngIf"],[1,"info-item"],[1,"label"],[1,"value"],[1,"profile-stats-section"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-value"],[1,"stat-label"],["class","stat-card",4,"ngIf"],[1,"profile-tabs",3,"selectedIndexChange","selectedIndex"],["label","\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629"],[1,"tab-content"],[1,"overview-card"],["class","department-stats-card",4,"ngIf"],["label","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a"],[1,"history-card"],[1,"table-container"],["mat-table","",1,"history-table",3,"dataSource"],["matColumnDef","visitNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","departmentName"],["matColumnDef","employeeToVisit"],["matColumnDef","checkInAt"],["matColumnDef","checkOutAt"],["matColumnDef","duration"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["label","\u0645\u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631"],["class","gallery-card",4,"ngIf"],[1,"profile-image-large",3,"error","src","alt"],[1,"profile-image-placeholder-large"],[1,"department-stats-card"],[1,"department-stats-list"],["class","department-stat-item",4,"ngFor","ngForOf"],[1,"department-stat-item"],[1,"stat-header"],[1,"dept-name"],[1,"dept-count"],[1,"stat-bar"],[1,"stat-bar-fill"],[1,"stat-percentage"],["mat-header-cell",""],["mat-cell",""],["mat-button","","color","primary",3,"click"],[3,"color"],["mat-header-row",""],["mat-row",""],[1,"gallery-card"],[1,"gallery-main"],["class","gallery-nav-button left",3,"click",4,"ngIf"],[1,"gallery-image-container"],["class","gallery-main-image",3,"src","alt","error",4,"ngIf"],["class","gallery-image-placeholder",4,"ngIf"],[1,"gallery-image-info"],[1,"image-type-badge"],[1,"image-details"],[1,"detail-item"],["class","detail-item",4,"ngIf"],["class","gallery-nav-button right",3,"click",4,"ngIf"],["class","gallery-thumbnails",4,"ngIf"],[1,"gallery-counter"],[1,"gallery-nav-button","left",3,"click"],[1,"gallery-main-image",3,"error","src","alt"],[1,"gallery-image-placeholder"],[1,"gallery-nav-button","right",3,"click"],[1,"gallery-thumbnails"],["class","thumbnail-item",3,"active","click",4,"ngFor","ngForOf"],[1,"thumbnail-item",3,"click"],[3,"src","alt","error",4,"ngIf"],["class","thumbnail-placeholder",4,"ngIf"],[1,"thumbnail-overlay"],[3,"error","src","alt"],[1,"thumbnail-placeholder"],[1,"empty-gallery"],[1,"loading-container"],["diameter","60"]],template:function(i,a){1&i&&t.DNE(0,Pt,106,28,"div",0)(1,Mt,4,0,"div",1),2&i&&(t.Y8G("ngIf",a.profile),t.R7$(),t.Y8G("ngIf",a.isLoading))},dependencies:[f.MD,f.Sq,f.bT,m.Hu,m.RN,m.m2,m.MM,m.dh,p.Hl,p.$z,p.iY,O.m_,O.An,x.YN,x.Jl,C.RI,C.mq,C.T8,b.D6,b.LG,v._T,s.tP,s.Zl,s.tL,s.ji,s.cC,s.YV,s.iL,s.KS,s.$R,s.YZ,s.NB,y.uc,y.oV,_.hM,h.RG,P.fS,u.YN],styles:['.visitor-profile-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.profile-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:24px;animation:_ngcontent-%COMP%_slideInLeft .4s ease-out}.profile-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .3s ease}.profile-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#667eea1a}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:28px;font-weight:700;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}@keyframes _ngcontent-%COMP%_slideInLeft{0%{opacity:0;transform:translate(-30px)}to{opacity:1;transform:translate(0)}}.profile-summary-card[_ngcontent-%COMP%]{margin-bottom:24px;box-shadow:0 8px 32px #667eea26;border-radius:20px;overflow:hidden;background:linear-gradient(135deg,#fff,#f8f9ff);border:1px solid rgba(102,126,234,.1);transition:all .3s ease;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.profile-summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 48px #667eea33;transform:translateY(-4px)}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]{display:flex;gap:32px;padding:32px;flex-wrap:wrap;background:linear-gradient(135deg,#667eea08,#764ba208)}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;animation:_ngcontent-%COMP%_scaleIn .6s ease-out}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .profile-image-container[_ngcontent-%COMP%]{position:relative}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .profile-image-large[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:50%;object-fit:cover;border:5px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#667eea,#764ba2) border-box;box-shadow:0 8px 24px #667eea4d;transition:all .3s ease;cursor:pointer}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .profile-image-large[_ngcontent-%COMP%]:hover{transform:scale(1.05) rotate(2deg);box-shadow:0 12px 32px #667eea66}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .profile-image-placeholder-large[_ngcontent-%COMP%]{width:160px;height:160px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea1a,#764ba21a);border:5px solid transparent;background-clip:padding-box;border-image:linear-gradient(135deg,#667eea,#764ba2) 1;box-shadow:0 8px 24px #667eea4d}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .profile-image-placeholder-large[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#667eea}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{font-size:14px;padding:10px 20px;border-radius:20px;font-weight:600;box-shadow:0 4px 12px #0000001a;transition:all .3s ease}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-image-section[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #00000026}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]{flex:1;min-width:300px;animation:_ngcontent-%COMP%_slideInRight .5s ease-out}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 28px;font-size:36px;font-weight:800;background:linear-gradient(135deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;letter-spacing:-.5px}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#fff;border-radius:12px;border:1px solid rgba(102,126,234,.1);transition:all .3s ease;cursor:pointer}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea0d,#764ba20d);border-color:#667eea4d;transform:translate(4px);box-shadow:0 4px 12px #667eea1a}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:28px;width:28px;height:28px;transition:all .3s ease}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(5deg)}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;font-size:11px;color:#999;margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px;font-weight:600}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:600;color:#333}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(30px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:16px;min-width:300px}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:24px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:16px;color:#fff;box-shadow:0 8px 24px #667eea4d;transition:all .3s ease;cursor:pointer;position:relative;overflow:hidden}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);opacity:0;transition:opacity .3s ease}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px) scale(1.05);box-shadow:0 12px 32px #667eea66}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover:before{opacity:1}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover   .stat-icon[_ngcontent-%COMP%]{transform:scale(1.2) rotate(10deg)}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{font-size:36px;width:36px;height:36px;margin-bottom:12px;transition:all .3s ease;filter:drop-shadow(0 2px 4px rgba(0,0,0,.2))}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:800;margin-bottom:6px;text-shadow:0 2px 4px rgba(0,0,0,.2)}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;opacity:.95;text-align:center;font-weight:500;letter-spacing:.3px}.profile-tabs[_ngcontent-%COMP%]{margin-top:24px;animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out .2s both}.profile-tabs[_ngcontent-%COMP%]     .mat-tab-label{font-weight:600;font-size:15px;transition:all .3s ease}.profile-tabs[_ngcontent-%COMP%]     .mat-tab-label:hover{background:#667eea0d}.profile-tabs[_ngcontent-%COMP%]     .mat-tab-label-active{color:#667eea}.profile-tabs[_ngcontent-%COMP%]     .mat-ink-bar{background:linear-gradient(90deg,#667eea,#764ba2);height:3px;border-radius:3px 3px 0 0}.profile-tabs[_ngcontent-%COMP%]     .mat-tab-body-content{padding:24px 0;animation:_ngcontent-%COMP%_fadeIn .4s ease-in-out}.tab-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.overview-card[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]{box-shadow:0 4px 20px #667eea1a;border-radius:16px;overflow:hidden;border:1px solid rgba(102,126,234,.1);transition:all .3s ease;animation:_ngcontent-%COMP%_slideUp .5s ease-out}.overview-card[_ngcontent-%COMP%]:hover, .department-stats-card[_ngcontent-%COMP%]:hover, .history-card[_ngcontent-%COMP%]:hover, .gallery-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 32px #667eea26;transform:translateY(-2px)}.overview-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea14,#764ba214);padding:20px 28px;border-radius:16px 16px 0 0;border-bottom:2px solid rgba(102,126,234,.1)}.overview-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin:0;font-size:20px;font-weight:700;color:#333}.overview-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:28px;width:28px;height:28px;transition:all .3s ease}.overview-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transform:scale(1.1) rotate(5deg)}.overview-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .department-stats-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .history-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], .gallery-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:28px;background:#fff}.department-stats-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]{padding:16px;background:linear-gradient(135deg,#667eea05,#764ba205);border-radius:12px;border:1px solid rgba(102,126,234,.1);transition:all .3s ease}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea0d,#764ba20d);border-color:#667eea33;transform:translate(4px);box-shadow:0 4px 12px #667eea1a}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]   .dept-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:16px}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]   .dept-count[_ngcontent-%COMP%]{color:#667eea;font-size:14px;font-weight:600;background:#667eea1a;padding:4px 12px;border-radius:12px}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]{height:10px;background:#667eea1a;border-radius:10px;overflow:hidden;margin-bottom:8px;box-shadow:inset 0 2px 4px #0000000d}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-bar[_ngcontent-%COMP%]   .stat-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .8s cubic-bezier(.4,0,.2,1);box-shadow:0 0 10px #667eea80;animation:_ngcontent-%COMP%_fillBar 1s ease-out}.department-stats-list[_ngcontent-%COMP%]   .department-stat-item[_ngcontent-%COMP%]   .stat-percentage[_ngcontent-%COMP%]{font-size:13px;color:#667eea;text-align:right;font-weight:600}@keyframes _ngcontent-%COMP%_fillBar{0%{width:0!important}}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.history-table[_ngcontent-%COMP%]{width:100%}.history-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea0d,#764ba20d);font-weight:700;color:#667eea;font-size:14px;text-transform:uppercase;letter-spacing:.5px;padding:16px}.history-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;transition:all .3s ease}.history-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:all .3s ease;border-bottom:1px solid rgba(102,126,234,.1)}.history-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea08,#764ba208);transform:scale(1.01);box-shadow:0 2px 8px #667eea1a}.history-table[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:12px;font-weight:600;transition:all .3s ease}.history-table[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.history-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .3s ease}.history-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);background:#667eea1a}.gallery-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0}.gallery-main[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;min-height:550px;background:linear-gradient(135deg,#1a1a2e,#16213e);margin-bottom:0;overflow:hidden}.gallery-main[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at center,rgba(102,126,234,.1) 0%,transparent 70%);pointer-events:none}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);z-index:10;background:linear-gradient(135deg,#667eeaf2,#764ba2f2);border-radius:50%;width:56px;height:56px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 16px #667eea66;border:2px solid rgba(255,255,255,.2)}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#667eea,#764ba2);transform:translateY(-50%) scale(1.15);box-shadow:0 6px 24px #667eea99}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]:active{transform:translateY(-50%) scale(1.05)}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button.left[_ngcontent-%COMP%]{left:24px;animation:_ngcontent-%COMP%_pulseLeft 2s infinite}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button.right[_ngcontent-%COMP%]{right:24px;animation:_ngcontent-%COMP%_pulseRight 2s infinite}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#fff;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}@keyframes _ngcontent-%COMP%_pulseLeft{0%,to{transform:translateY(-50%) translate(0)}50%{transform:translateY(-50%) translate(-5px)}}@keyframes _ngcontent-%COMP%_pulseRight{0%,to{transform:translateY(-50%) translate(0)}50%{transform:translateY(-50%) translate(5px)}}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:20px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-main-image[_ngcontent-%COMP%]{max-width:100%;max-height:500px;object-fit:contain;border-radius:16px;box-shadow:0 12px 48px #00000080;transition:all .5s ease;animation:_ngcontent-%COMP%_imageZoomIn .5s ease-out}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-main-image[_ngcontent-%COMP%]:hover{transform:scale(1.02);box-shadow:0 16px 64px #0009}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-placeholder[_ngcontent-%COMP%]{width:100%;height:500px;display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea0d,#764ba20d);border-radius:16px;border:2px dashed rgba(102,126,234,.3)}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#667eea;margin-bottom:16px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#667eea;font-size:18px;font-weight:500}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.95) 0%,rgba(0,0,0,.7) 50%,transparent 100%);padding:32px;color:#fff;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,#667eeaf2,#764ba2f2);padding:10px 20px;border-radius:24px;margin-bottom:20px;font-weight:600;font-size:14px;box-shadow:0 4px 16px #667eea66;border:1px solid rgba(255,255,255,.2);transition:all .3s ease}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-type-badge[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #667eea99}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-type-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:28px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;font-size:15px;font-weight:500;background:#ffffff1a;padding:8px 16px;border-radius:20px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.2);transition:all .3s ease}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-2px)}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#667eea}@keyframes _ngcontent-%COMP%_imageZoomIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.gallery-thumbnails[_ngcontent-%COMP%]{display:flex;gap:16px;padding:28px;overflow-x:auto;background:linear-gradient(135deg,#667eea0d,#764ba20d);justify-content:center;border-top:2px solid rgba(102,126,234,.1)}.gallery-thumbnails[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.gallery-thumbnails[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#667eea0d;border-radius:10px}.gallery-thumbnails[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(90deg,#667eea,#764ba2);border-radius:10px}.gallery-thumbnails[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(90deg,#764ba2,#667eea)}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]{position:relative;width:110px;height:110px;border-radius:12px;overflow:hidden;cursor:pointer;border:3px solid transparent;transition:all .3s ease;flex-shrink:0;box-shadow:0 4px 12px #0000001a}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]:hover{transform:scale(1.15) translateY(-4px);border-color:#667eea;box-shadow:0 8px 24px #667eea4d;z-index:10}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item.active[_ngcontent-%COMP%]{border:4px solid transparent;background:linear-gradient(#fff,#fff) padding-box,linear-gradient(135deg,#667eea,#764ba2) border-box;box-shadow:0 8px 24px #667eea80;transform:scale(1.1)}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:all .3s ease}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   .thumbnail-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#667eea1a,#764ba21a)}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   .thumbnail-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#667eea}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   .thumbnail-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,#667eeacc,#764ba2cc);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   .thumbnail-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:32px;width:32px;height:32px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]:hover   .thumbnail-overlay[_ngcontent-%COMP%]{opacity:1}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.gallery-counter[_ngcontent-%COMP%]{text-align:center;padding:20px;background:linear-gradient(135deg,#667eea14,#764ba214);font-weight:700;font-size:15px;color:#667eea;border-top:2px solid rgba(102,126,234,.2);letter-spacing:.5px}.empty-gallery[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:80px;color:#999;background:linear-gradient(135deg,#667eea05,#764ba205);border-radius:16px}.empty-gallery[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:80px;width:80px;height:80px;color:#ddd;margin-bottom:24px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}.empty-gallery[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;margin:0;font-weight:500}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:120px;gap:28px;background:linear-gradient(135deg,#667eea05,#764ba205);border-radius:16px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]     circle{stroke:url(#gradient)}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#667eea;font-size:18px;font-weight:600;animation:_ngcontent-%COMP%_pulse 1.5s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}@media (max-width: 768px){.visitor-profile-container[_ngcontent-%COMP%]{padding:16px}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]{width:100%}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-info-section[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.profile-summary-card[_ngcontent-%COMP%]   .profile-header-section[_ngcontent-%COMP%]   .profile-stats-section[_ngcontent-%COMP%]{width:100%;grid-template-columns:repeat(2,1fr)}.gallery-main[_ngcontent-%COMP%]{min-height:300px}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]{width:40px;height:40px}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button.left[_ngcontent-%COMP%]{left:8px}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button.right[_ngcontent-%COMP%]{right:8px}.gallery-main[_ngcontent-%COMP%]   .gallery-nav-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]{padding:16px;font-size:12px}.gallery-main[_ngcontent-%COMP%]   .gallery-image-container[_ngcontent-%COMP%]   .gallery-image-info[_ngcontent-%COMP%]   .image-details[_ngcontent-%COMP%]{gap:12px}.gallery-thumbnails[_ngcontent-%COMP%]{padding:16px}.gallery-thumbnails[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]{width:80px;height:80px}}'],data:{animation:[(0,g.hZ)("fadeIn",[(0,g.kY)(":enter",[(0,g.iF)({opacity:0,transform:"translateY(20px)"}),(0,g.i0)("500ms ease-out",(0,g.iF)({opacity:1,transform:"translateY(0)"}))])]),(0,g.hZ)("slideIn",[(0,g.kY)(":enter",[(0,g.iF)({opacity:0,transform:"translateX(-20px)"}),(0,g.i0)("400ms ease-out",(0,g.iF)({opacity:1,transform:"translateX(0)"}))])])]}})}}return n})(),I=(()=>{class n{constructor(e){this.dialogRef=e,this.blockReason=""}onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close(this.blockReason)}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(_.CP))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-block-visitor-dialog"]],standalone:!0,features:[t.aNF],decls:12,vars:2,consts:[["mat-dialog-title",""],["appearance","outline",1,"full-width"],["matInput","","rows","4","placeholder","\u0623\u062f\u062e\u0644 \u0633\u0628\u0628 \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631",3,"ngModelChange","ngModel"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","warn",3,"click","disabled"]],template:function(i,a){1&i&&(t.j41(0,"h2",0),t.EFF(1,"\u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631"),t.k0s(),t.j41(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),t.EFF(5,"\u0633\u0628\u0628 \u0627\u0644\u062d\u0638\u0631"),t.k0s(),t.j41(6,"textarea",2),t.mxI("ngModelChange",function(d){return t.DH7(a.blockReason,d)||(a.blockReason=d),d}),t.k0s()()(),t.j41(7,"mat-dialog-actions",3)(8,"button",4),t.bIt("click",function(){return a.onCancel()}),t.EFF(9,"\u0625\u0644\u063a\u0627\u0621"),t.k0s(),t.j41(10,"button",5),t.bIt("click",function(){return a.onConfirm()}),t.EFF(11," \u062d\u0638\u0631 \u0627\u0644\u0632\u0627\u0626\u0631 "),t.k0s()()),2&i&&(t.R7$(6),t.R50("ngModel",a.blockReason),t.R7$(4),t.Y8G("disabled",!a.blockReason||""===a.blockReason.trim()))},dependencies:[f.MD,_.hM,_.BI,_.E7,_.Yi,h.RG,h.rl,h.nJ,P.fS,P.fg,p.Hl,p.$z,u.YN,u.me,u.BC,u.vS],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})}}return n})()}}]);