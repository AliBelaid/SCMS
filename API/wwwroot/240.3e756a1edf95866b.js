"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[240],{2240:(bt,C,s)=>{s.r(C),s.d(C,{OrderDetailsComponent:()=>vt});var t=s(4438),l=s(177),m=s(9192),F=s(1413),d=s(6977),P=s(4006),M=s(5416),u=s(5596),g=s(6850),p=s(8834),h=s(9213),x=s(6471),_=s(3902),v=s(9183),b=s(4823),a=s(2385),E=s(8287),k=s(5048),D=s(5316);function w(e,r){1&e&&(t.j41(0,"div",5),t.nrm(1,"mat-spinner"),t.j41(2,"p"),t.EFF(3,"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644..."),t.k0s()())}function A(e,r){if(1&e){const n=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.editOrder())}),t.j41(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \u062a\u0639\u062f\u064a\u0644 "),t.k0s()}}function I(e,r){if(1&e){const n=t.RV6();t.j41(0,"button",35),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.archiveOrder())}),t.j41(1,"mat-icon"),t.EFF(2,"archive"),t.k0s(),t.EFF(3," \u0623\u0631\u0634\u0641\u0629 "),t.k0s()}}function y(e,r){if(1&e){const n=t.RV6();t.j41(0,"button",36),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.deleteOrder())}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," \u062d\u0630\u0641 "),t.k0s()}}function j(e,r){if(1&e&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2,"\u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b:"),t.k0s(),t.j41(3,"span",23),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.formatDate(n.order.updatedAt))}}function R(e,r){if(1&e&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642:"),t.k0s(),t.j41(3,"span",23),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.formatDate(n.order.dueDate))}}function T(e,r){if(1&e&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621:"),t.k0s(),t.j41(3,"span",37),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.formatDate(n.order.expirationDate))}}function $(e,r){if(1&e&&(t.j41(0,"div",21)(1,"span",22),t.EFF(2,"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"),t.k0s(),t.j41(3,"span",23),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(4),t.JRh(n.order.notes)}}function G(e,r){1&e&&(t.j41(0,"mat-chip",44)(1,"mat-icon"),t.EFF(2,"verified_user"),t.k0s(),t.EFF(3," \u0645\u0627\u0644\u0643 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 "),t.k0s())}function U(e,r){1&e&&(t.j41(0,"mat-chip",45)(1,"mat-icon"),t.EFF(2,"visibility"),t.k0s(),t.EFF(3," \u0639\u0631\u0636 "),t.k0s())}function L(e,r){1&e&&(t.j41(0,"mat-chip",45)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \u062a\u0639\u062f\u064a\u0644 "),t.k0s())}function Y(e,r){1&e&&(t.j41(0,"mat-chip",46)(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," \u062d\u0630\u0641 "),t.k0s())}function B(e,r){if(1&e&&(t.j41(0,"p",47)(1,"mat-icon"),t.EFF(2,"info"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG(3);t.R7$(3),t.SpI(" \u0645\u0635\u062f\u0631 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629: ","Owner"===n.myPermissions.permissionSource?"\u0645\u0627\u0644\u0643":"Direct"===n.myPermissions.permissionSource?"\u0645\u0628\u0627\u0634\u0631":"Department"===n.myPermissions.permissionSource?"\u0625\u062f\u0627\u0631\u0629":"Public"===n.myPermissions.permissionSource?"\u0639\u0627\u0645":"\u0644\u0627 \u064a\u0648\u062c\u062f"," ")}}function S(e,r){if(1&e&&(t.j41(0,"div",38)(1,"div",39),t.DNE(2,G,4,0,"mat-chip",40)(3,U,4,0,"mat-chip",41)(4,L,4,0,"mat-chip",41)(5,Y,4,0,"mat-chip",42),t.k0s(),t.DNE(6,B,4,1,"p",43),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.Y8G("ngIf",n.isOwner),t.R7$(),t.Y8G("ngIf",n.myPermissions.canView),t.R7$(),t.Y8G("ngIf",n.myPermissions.canEdit),t.R7$(),t.Y8G("ngIf",n.myPermissions.canDelete),t.R7$(),t.Y8G("ngIf",n.myPermissions.permissionSource)}}function N(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"folder_open"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0631\u0641\u0642\u0627\u062a"),t.k0s()())}function V(e,r){if(1&e){const n=t.RV6();t.j41(0,"mat-list-item",50)(1,"mat-icon",51),t.EFF(2),t.k0s(),t.j41(3,"div",52)(4,"span",53),t.EFF(5),t.k0s(),t.j41(6,"span",54),t.EFF(7),t.k0s()(),t.j41(8,"div",55)(9,"button",56),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(3);return t.Njj(c.viewAttachment(o))}),t.j41(10,"mat-icon"),t.EFF(11,"visibility"),t.k0s()(),t.j41(12,"button",57),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(3);return t.Njj(c.downloadAttachment(o))}),t.j41(13,"mat-icon"),t.EFF(14,"download"),t.k0s()()()()}if(2&e){const n=r.$implicit,i=t.XpG(3);t.R7$(),t.HbH("file-icon "+n.fileType),t.R7$(),t.SpI(" ","pdf"===n.fileType?"picture_as_pdf":"image"===n.fileType?"image":"document"===n.fileType?"description":"insert_drive_file"," "),t.R7$(3),t.JRh(n.fileName),t.R7$(2),t.JRh(i.formatFileSize(n.fileSize)),t.R7$(2),t.Y8G("disabled",!i.isViewableFile(n)||!(null!=i.myPermissions&&i.myPermissions.canView)&&!i.isOwner),t.R7$(3),t.Y8G("disabled",!(null!=i.myPermissions&&i.myPermissions.canDownload||i.isOwner))}}function z(e,r){if(1&e&&(t.j41(0,"mat-list"),t.DNE(1,V,15,7,"mat-list-item",49),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.order.attachments)}}function X(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"history"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u062c\u0644"),t.k0s()())}function W(e,r){if(1&e&&(t.j41(0,"div",68)(1,"span",69),t.EFF(2,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0627\u0628\u0642\u0629:"),t.k0s(),t.j41(3,"span",70),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2).$implicit;t.R7$(4),t.JRh(n.oldValue)}}function J(e,r){if(1&e&&(t.j41(0,"div",68)(1,"span",69),t.EFF(2,"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629:"),t.k0s(),t.j41(3,"span",71),t.EFF(4),t.k0s()()),2&e){const n=t.XpG(2).$implicit;t.R7$(4),t.JRh(n.newValue)}}function K(e,r){if(1&e&&(t.j41(0,"div",66),t.DNE(1,W,5,1,"div",67)(2,J,5,1,"div",67),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",n.oldValue),t.R7$(),t.Y8G("ngIf",n.newValue)}}function H(e,r){if(1&e&&(t.j41(0,"p",72)(1,"mat-icon"),t.EFF(2,"note"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.notes," ")}}function Q(e,r){if(1&e&&(t.j41(0,"div",60)(1,"div",61)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card",62)(5,"mat-card-header")(6,"mat-card-title"),t.EFF(7),t.k0s(),t.j41(8,"mat-card-subtitle")(9,"mat-icon"),t.EFF(10,"person"),t.k0s(),t.EFF(11),t.j41(12,"mat-icon"),t.EFF(13,"schedule"),t.k0s(),t.EFF(14),t.k0s()(),t.j41(15,"mat-card-content")(16,"p",63),t.EFF(17),t.k0s(),t.DNE(18,K,3,2,"div",64)(19,H,4,1,"p",65),t.k0s()()()),2&e){const n=r.$implicit,i=r.last,o=t.XpG(3);t.AVh("last",i),t.R7$(),t.Y8G("ngClass",o.getActionColor(n.action)),t.R7$(2),t.JRh(o.actionIcons[n.action]),t.R7$(4),t.JRh(o.actionLabels[n.action]),t.R7$(4),t.SpI(" ",n.performedByName||"\u0645\u0633\u062a\u062e\u062f\u0645"," \u2022 "),t.R7$(3),t.SpI(" ",o.formatDate(n.performedAt)," "),t.R7$(3),t.JRh(n.description),t.R7$(),t.Y8G("ngIf",n.oldValue||n.newValue),t.R7$(),t.Y8G("ngIf",n.notes)}}function q(e,r){if(1&e&&(t.j41(0,"div",58),t.DNE(1,Q,20,10,"div",59),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.orderHistory)}}function Z(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"person_off"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0645\u0628\u0627\u0634\u0631\u0629"),t.k0s()())}function tt(e,r){1&e&&(t.j41(0,"mat-chip",45)(1,"mat-icon"),t.EFF(2,"visibility"),t.k0s(),t.EFF(3," \u0639\u0631\u0636 "),t.k0s())}function nt(e,r){1&e&&(t.j41(0,"mat-chip",45)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \u062a\u0639\u062f\u064a\u0644 "),t.k0s())}function et(e,r){1&e&&(t.j41(0,"mat-chip",46)(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," \u062d\u0630\u0641 "),t.k0s())}function it(e,r){if(1&e){const n=t.RV6();t.j41(0,"mat-list-item",75)(1,"mat-icon",51),t.EFF(2,"person"),t.k0s(),t.j41(3,"div",76)(4,"span",77),t.EFF(5),t.k0s(),t.j41(6,"span",78),t.EFF(7),t.k0s()(),t.j41(8,"div",79)(9,"div",39),t.DNE(10,tt,4,0,"mat-chip",41)(11,nt,4,0,"mat-chip",41)(12,et,4,0,"mat-chip",42),t.k0s()(),t.j41(13,"button",80),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(4);return t.Njj(c.revokeUserPermission(o.userId))}),t.j41(14,"mat-icon"),t.EFF(15,"cancel"),t.k0s()()()}if(2&e){const n=r.$implicit;t.R7$(5),t.JRh(n.userCode||"\u0645\u0633\u062a\u062e\u062f\u0645"),t.R7$(2),t.JRh(n.userEmail),t.R7$(3),t.Y8G("ngIf",n.canView),t.R7$(),t.Y8G("ngIf",n.canEdit),t.R7$(),t.Y8G("ngIf",n.canDelete)}}function ot(e,r){if(1&e&&(t.j41(0,"mat-list"),t.DNE(1,it,16,5,"mat-list-item",74),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.order.userPermissions)}}function rt(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"business_center"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u062f\u0627\u0631\u0627\u062a \u0644\u062f\u064a\u0647\u0627 \u0648\u0635\u0648\u0644"),t.k0s()())}function at(e,r){if(1&e){const n=t.RV6();t.j41(0,"mat-list-item",75)(1,"mat-icon",51),t.EFF(2,"business"),t.k0s(),t.j41(3,"div",76)(4,"span",81),t.EFF(5),t.k0s()(),t.j41(6,"div",82)(7,"mat-chip",12),t.EFF(8),t.k0s()(),t.j41(9,"button",83),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(4);return t.Njj(c.revokeDepartmentAccess(o.departmentId))}),t.j41(10,"mat-icon"),t.EFF(11,"cancel"),t.k0s()()()}if(2&e){const n=r.$implicit,i=t.XpG(4);t.R7$(5),t.JRh(n.departmentNameAr),t.R7$(2),t.Y8G("color",3===n.accessLevel?"primary":"accent"),t.R7$(),t.SpI(" ",i.getAccessLevelLabel(n.accessLevel)," ")}}function ct(e,r){if(1&e&&(t.j41(0,"mat-list"),t.DNE(1,at,12,3,"mat-list-item",74),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.order.departmentAccesses)}}function st(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"check_circle"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u062a\u0648\u062c\u062f \u0627\u0633\u062a\u062b\u0646\u0627\u0621\u0627\u062a"),t.k0s()())}function dt(e,r){if(1&e&&(t.j41(0,"div",82)(1,"mat-icon"),t.EFF(2,"info"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.SpI(" ",n.reason," ")}}function _t(e,r){if(1&e){const n=t.RV6();t.j41(0,"mat-list-item",85)(1,"mat-icon",86),t.EFF(2,"block"),t.k0s(),t.j41(3,"div",76)(4,"span",77),t.EFF(5),t.k0s()(),t.DNE(6,dt,4,1,"div",87),t.j41(7,"button",88),t.bIt("click",function(){const o=t.eBV(n).$implicit,c=t.XpG(4);return t.Njj(c.removeUserException(o.userId))}),t.j41(8,"mat-icon"),t.EFF(9,"check_circle"),t.k0s()()()}if(2&e){const n=r.$implicit;t.R7$(5),t.JRh(n.userCode||"\u0645\u0633\u062a\u062e\u062f\u0645"),t.R7$(),t.Y8G("ngIf",n.reason)}}function ut(e,r){if(1&e&&(t.j41(0,"mat-list"),t.DNE(1,_t,10,2,"mat-list-item",84),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.order.userExceptions)}}function lt(e,r){if(1&e){const n=t.RV6();t.j41(0,"mat-tab",73)(1,"div",19)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title")(5,"mat-icon"),t.EFF(6,"person"),t.k0s(),t.EFF(7," \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 "),t.k0s(),t.j41(8,"button",34),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.grantUserPermission())}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s(),t.EFF(11," \u0645\u0646\u062d \u0635\u0644\u0627\u062d\u064a\u0629 "),t.k0s()(),t.j41(12,"mat-card-content"),t.DNE(13,Z,5,0,"div",28)(14,ot,2,1,"mat-list",29),t.k0s()(),t.j41(15,"mat-card")(16,"mat-card-header")(17,"mat-card-title")(18,"mat-icon"),t.EFF(19,"business"),t.k0s(),t.EFF(20," \u0648\u0635\u0648\u0644 \u0627\u0644\u0625\u062f\u0627\u0631\u0627\u062a "),t.k0s(),t.j41(21,"button",34),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.grantDepartmentAccess())}),t.j41(22,"mat-icon"),t.EFF(23,"add"),t.k0s(),t.EFF(24," \u0645\u0646\u062d \u0648\u0635\u0648\u0644 "),t.k0s()(),t.j41(25,"mat-card-content"),t.DNE(26,rt,5,0,"div",28)(27,ct,2,1,"mat-list",29),t.k0s()(),t.j41(28,"mat-card")(29,"mat-card-header")(30,"mat-card-title")(31,"mat-icon"),t.EFF(32,"block"),t.k0s(),t.EFF(33," \u0627\u0633\u062a\u062b\u0646\u0627\u0621\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 "),t.k0s()(),t.j41(34,"mat-card-content"),t.DNE(35,st,5,0,"div",28)(36,ut,2,1,"mat-list",29),t.k0s()()()()}if(2&e){const n=t.XpG(2);t.R7$(13),t.Y8G("ngIf",!n.order.userPermissions||0===n.order.userPermissions.length),t.R7$(),t.Y8G("ngIf",n.order.userPermissions&&n.order.userPermissions.length>0),t.R7$(12),t.Y8G("ngIf",!n.order.departmentAccesses||0===n.order.departmentAccesses.length),t.R7$(),t.Y8G("ngIf",n.order.departmentAccesses&&n.order.departmentAccesses.length>0),t.R7$(8),t.Y8G("ngIf",!n.order.userExceptions||0===n.order.userExceptions.length),t.R7$(),t.Y8G("ngIf",n.order.userExceptions&&n.order.userExceptions.length>0)}}function mt(e,r){1&e&&(t.j41(0,"div",48)(1,"mat-icon"),t.EFF(2,"people_outline"),t.k0s(),t.j41(3,"p"),t.EFF(4,"\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0646\u0634\u0637\u064a\u0646"),t.k0s()())}function gt(e,r){if(1&e&&(t.j41(0,"span",78),t.EFF(1),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.JRh(n.userEmail)}}function pt(e,r){1&e&&(t.j41(0,"span",99)(1,"mat-icon"),t.EFF(2,"visibility"),t.k0s(),t.EFF(3," \u0639\u0631\u0636 "),t.k0s())}function Ot(e,r){1&e&&(t.j41(0,"span",100)(1,"mat-icon"),t.EFF(2,"edit"),t.k0s(),t.EFF(3," \u062a\u0639\u062f\u064a\u0644 "),t.k0s())}function ft(e,r){1&e&&(t.j41(0,"span",101)(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.EFF(3," \u062d\u0630\u0641 "),t.k0s())}function Ct(e,r){if(1&e&&(t.j41(0,"div",102)(1,"mat-icon"),t.EFF(2,"schedule"),t.k0s(),t.EFF(3),t.k0s()),2&e){const n=t.XpG().$implicit,i=t.XpG(4);t.R7$(3),t.SpI(" ",i.formatDate(n.grantedAt)," ")}}function Pt(e,r){if(1&e&&(t.j41(0,"mat-list-item",91)(1,"mat-icon",51),t.EFF(2),t.k0s(),t.j41(3,"div",76)(4,"span",77),t.EFF(5),t.k0s(),t.DNE(6,gt,2,1,"span",92),t.k0s(),t.j41(7,"div",93)(8,"div",39)(9,"mat-chip",12),t.EFF(10),t.k0s(),t.j41(11,"mat-chip"),t.EFF(12),t.k0s()()(),t.j41(13,"div",94),t.DNE(14,pt,4,0,"span",95)(15,Ot,4,0,"span",96)(16,ft,4,0,"span",97),t.k0s(),t.DNE(17,Ct,4,1,"div",98),t.k0s()),2&e){const n=r.$implicit;t.R7$(),t.HbH(n.accessType),t.R7$(),t.SpI(" ","owner"===n.accessType?"verified_user":"direct"===n.accessType?"person":"department"===n.accessType?"business":"public"," "),t.R7$(3),t.JRh(n.userName),t.R7$(),t.Y8G("ngIf",n.userEmail),t.R7$(3),t.Y8G("color","owner"===n.accessType?"primary":"accent"),t.R7$(),t.SpI(" ",n.source," "),t.R7$(2),t.JRh(n.accessLevel),t.R7$(2),t.Y8G("ngIf",n.canView),t.R7$(),t.Y8G("ngIf",n.canEdit),t.R7$(),t.Y8G("ngIf",n.canDelete),t.R7$(),t.Y8G("ngIf",n.grantedAt)}}function Mt(e,r){if(1&e&&(t.j41(0,"mat-list"),t.DNE(1,Pt,18,12,"mat-list-item",90),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.activeUsers)}}function ht(e,r){if(1&e&&(t.j41(0,"mat-tab",89)(1,"div",19)(2,"mat-card")(3,"mat-card-header")(4,"mat-card-title")(5,"mat-icon"),t.EFF(6,"people"),t.k0s(),t.EFF(7),t.k0s()(),t.j41(8,"mat-card-content"),t.DNE(9,mt,5,0,"div",28)(10,Mt,2,1,"mat-list",29),t.k0s()()()()),2&e){const n=t.XpG(2);t.R7$(7),t.SpI(" \u0645\u0646 \u0644\u062f\u064a\u0647 \u0648\u0635\u0648\u0644 (",n.activeUsers.length,") "),t.R7$(2),t.Y8G("ngIf",0===n.activeUsers.length),t.R7$(),t.Y8G("ngIf",n.activeUsers.length>0)}}function xt(e,r){if(1&e){const n=t.RV6();t.j41(0,"div",6)(1,"mat-card",7)(2,"mat-card-content")(3,"div",8)(4,"div",9)(5,"mat-icon"),t.EFF(6,"tag"),t.k0s(),t.j41(7,"div")(8,"span",10),t.EFF(9,"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639\u064a:"),t.k0s(),t.j41(10,"span",11),t.EFF(11),t.k0s()()(),t.j41(12,"div",9)(13,"mat-icon"),t.EFF(14,"swap_horiz"),t.k0s(),t.j41(15,"div")(16,"span",10),t.EFF(17,"\u0627\u0644\u0646\u0648\u0639:"),t.k0s(),t.j41(18,"mat-chip",12),t.EFF(19),t.k0s()()(),t.j41(20,"div",9)(21,"mat-icon"),t.EFF(22,"business"),t.k0s(),t.j41(23,"div")(24,"span",10),t.EFF(25,"\u0627\u0644\u0642\u0633\u0645:"),t.k0s(),t.j41(26,"span",11),t.EFF(27),t.k0s()()(),t.j41(28,"div",9)(29,"mat-icon"),t.EFF(30,"category"),t.k0s(),t.j41(31,"div")(32,"span",10),t.EFF(33,"\u0627\u0644\u0645\u0648\u0636\u0648\u0639:"),t.k0s(),t.j41(34,"span",11),t.EFF(35),t.k0s()()(),t.j41(36,"div",9)(37,"mat-icon"),t.EFF(38,"info"),t.k0s(),t.j41(39,"div")(40,"span",10),t.EFF(41,"\u0627\u0644\u062d\u0627\u0644\u0629:"),t.k0s(),t.j41(42,"mat-chip",12),t.EFF(43),t.k0s()()(),t.j41(44,"div",9)(45,"mat-icon"),t.EFF(46,"priority_high"),t.k0s(),t.j41(47,"div")(48,"span",10),t.EFF(49,"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629:"),t.k0s(),t.j41(50,"mat-chip",12),t.EFF(51),t.k0s()()()(),t.j41(52,"div",13),t.DNE(53,A,4,0,"button",14)(54,I,4,0,"button",15)(55,y,4,0,"button",16),t.k0s()()(),t.j41(56,"mat-tab-group",17),t.mxI("selectedIndexChange",function(o){t.eBV(n);const c=t.XpG();return t.DH7(c.selectedTab,o)||(c.selectedTab=o),t.Njj(o)}),t.j41(57,"mat-tab",18)(58,"div",19)(59,"mat-card")(60,"mat-card-header")(61,"mat-card-title")(62,"mat-icon"),t.EFF(63,"description"),t.k0s(),t.EFF(64," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 "),t.k0s()(),t.j41(65,"mat-card-content")(66,"div",20)(67,"div",21)(68,"span",22),t.EFF(69,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"),t.k0s(),t.j41(70,"span",23),t.EFF(71),t.k0s()(),t.j41(72,"div",21)(73,"span",22),t.EFF(74,"\u0627\u0644\u0648\u0635\u0641:"),t.k0s(),t.j41(75,"span",23),t.EFF(76),t.k0s()(),t.j41(77,"div",21)(78,"span",22),t.EFF(79,"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0634\u0627\u0621:"),t.k0s(),t.j41(80,"span",23),t.EFF(81),t.k0s()(),t.DNE(82,j,5,1,"div",24),t.j41(83,"div",21)(84,"span",22),t.EFF(85,"\u0623\u0646\u0634\u0626\u062a \u0628\u0648\u0627\u0633\u0637\u0629:"),t.k0s(),t.j41(86,"span",23),t.EFF(87),t.k0s()(),t.DNE(88,R,5,1,"div",24)(89,T,5,1,"div",24)(90,$,5,1,"div",24),t.j41(91,"div",21)(92,"span",22),t.EFF(93,"\u0639\u0627\u0645\u0629:"),t.k0s(),t.j41(94,"span",23)(95,"mat-icon"),t.EFF(96),t.k0s(),t.EFF(97),t.k0s()()()()(),t.j41(98,"mat-card",25)(99,"mat-card-header")(100,"mat-card-title")(101,"mat-icon"),t.EFF(102,"vpn_key"),t.k0s(),t.EFF(103," \u0635\u0644\u0627\u062d\u064a\u0627\u062a\u064a "),t.k0s()(),t.j41(104,"mat-card-content"),t.DNE(105,S,7,5,"div",26),t.k0s()()()(),t.j41(106,"mat-tab",27)(107,"div",19)(108,"mat-card")(109,"mat-card-header")(110,"mat-card-title")(111,"mat-icon"),t.EFF(112,"attach_file"),t.k0s(),t.EFF(113),t.k0s()(),t.j41(114,"mat-card-content"),t.DNE(115,N,5,0,"div",28)(116,z,2,1,"mat-list",29),t.k0s()()()(),t.j41(117,"mat-tab",30)(118,"div",19)(119,"mat-card")(120,"mat-card-header")(121,"mat-card-title")(122,"mat-icon"),t.EFF(123,"history"),t.k0s(),t.EFF(124),t.k0s()(),t.j41(125,"mat-card-content"),t.DNE(126,X,5,0,"div",28)(127,q,2,1,"div",31),t.k0s()()()(),t.DNE(128,lt,37,6,"mat-tab",32)(129,ht,11,3,"mat-tab",33),t.k0s()()}if(2&e){const n=t.XpG();t.R7$(11),t.JRh(n.order.referenceNumber),t.R7$(7),t.Y8G("color","incoming"===n.order.type?"primary":"accent"),t.R7$(),t.SpI(" ",n.typeLabels[n.order.type]," "),t.R7$(8),t.JRh(n.order.departmentCode),t.R7$(8),t.JRh(n.order.subjectCode),t.R7$(7),t.Y8G("color",n.getStatusColor(n.order.status)),t.R7$(),t.SpI(" ",n.statusLabels[n.order.status]," "),t.R7$(7),t.Y8G("color",n.getPriorityColor(n.order.priority)),t.R7$(),t.SpI(" ",n.priorityLabels[n.order.priority]," "),t.R7$(2),t.Y8G("ngIf",null==n.myPermissions?null:n.myPermissions.canEdit),t.R7$(),t.Y8G("ngIf",n.isOwner),t.R7$(),t.Y8G("ngIf",null==n.myPermissions?null:n.myPermissions.canDelete),t.R7$(),t.R50("selectedIndex",n.selectedTab),t.R7$(15),t.JRh(n.order.title),t.R7$(5),t.JRh(n.order.description),t.R7$(5),t.JRh(n.formatDate(n.order.createdAt)),t.R7$(),t.Y8G("ngIf",n.order.updatedAt),t.R7$(5),t.JRh(n.order.createdBy),t.R7$(),t.Y8G("ngIf",n.order.dueDate),t.R7$(),t.Y8G("ngIf",n.order.expirationDate),t.R7$(),t.Y8G("ngIf",n.order.notes),t.R7$(5),t.AVh("public",n.order.isPublic)("private",!n.order.isPublic),t.R7$(),t.SpI(" ",n.order.isPublic?"public":"lock"," "),t.R7$(),t.SpI(" ",n.order.isPublic?"\u0646\u0639\u0645":"\u0644\u0627"," "),t.R7$(8),t.Y8G("ngIf",n.myPermissions),t.R7$(8),t.SpI(" \u0627\u0644\u0645\u0644\u0641\u0627\u062a \u0627\u0644\u0645\u0631\u0641\u0642\u0629 (",(null==n.order.attachments?null:n.order.attachments.length)||0,") "),t.R7$(2),t.Y8G("ngIf",!n.order.attachments||0===n.order.attachments.length),t.R7$(),t.Y8G("ngIf",n.order.attachments&&n.order.attachments.length>0),t.R7$(8),t.SpI(" \u0633\u062c\u0644 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a (",n.orderHistory.length,") "),t.R7$(2),t.Y8G("ngIf",0===n.orderHistory.length),t.R7$(),t.Y8G("ngIf",n.orderHistory.length>0),t.R7$(),t.Y8G("ngIf",n.showPermissionsTab),t.R7$(),t.Y8G("ngIf",n.showActiveUsersTab)}}let vt=(()=>{class e{constructor(){this.route=(0,t.WQX)(m.nX),this.router=(0,t.WQX)(m.Ix),this.departmentService=(0,t.WQX)(E.a),this.authService=(0,t.WQX)(k.u),this.dialog=(0,t.WQX)(P.bZ),this.snackBar=(0,t.WQX)(M.UG),this.currentUser=this.authService.getCurrentUser(),this.destroy$=new F.B,this.order=null,this.myPermissions=null,this.orderHistory=[],this.activeUsers=[],this.selectedTab=0,this.isLoading=!0,this.isOwner=!1,this.showPermissionsTab=!1,this.showActiveUsersTab=!1,this.statusLabels={pending:"\u0642\u064a\u062f \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631","in-progress":"\u0642\u064a\u062f \u0627\u0644\u062a\u0646\u0641\u064a\u0630",completed:"\u0645\u0643\u062a\u0645\u0644\u0629",archived:"\u0645\u0624\u0631\u0634\u0641\u0629",cancelled:"\u0645\u0644\u063a\u0627\u0629"},this.priorityLabels={low:"\u0645\u0646\u062e\u0641\u0636\u0629",medium:"\u0645\u062a\u0648\u0633\u0637\u0629",high:"\u0639\u0627\u0644\u064a\u0629",urgent:"\u0639\u0627\u062c\u0644\u0629"},this.typeLabels={incoming:"\u0648\u0627\u0631\u062f",outgoing:"\u0635\u0627\u062f\u0631"},this.actionLabels={[a.T.Created]:"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621",[a.T.Updated]:"\u062a\u0645 \u0627\u0644\u062a\u062d\u062f\u064a\u062b",[a.T.StatusChanged]:"\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u062d\u0627\u0644\u0629",[a.T.PriorityChanged]:"\u062a\u063a\u064a\u064a\u0631 \u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629",[a.T.Assigned]:"\u062a\u0645 \u0627\u0644\u062a\u0639\u064a\u064a\u0646",[a.T.AttachmentAdded]:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0631\u0641\u0642",[a.T.AttachmentRemoved]:"\u062d\u0630\u0641 \u0645\u0631\u0641\u0642",[a.T.PermissionGranted]:"\u0645\u0646\u062d \u0635\u0644\u0627\u062d\u064a\u0629",[a.T.PermissionRevoked]:"\u0625\u0644\u063a\u0627\u0621 \u0635\u0644\u0627\u062d\u064a\u0629",[a.T.DepartmentAccessGranted]:"\u0645\u0646\u062d \u0648\u0635\u0648\u0644 \u0625\u062f\u0627\u0631\u0629",[a.T.DepartmentAccessRevoked]:"\u0625\u0644\u063a\u0627\u0621 \u0648\u0635\u0648\u0644 \u0625\u062f\u0627\u0631\u0629",[a.T.UserExcluded]:"\u0627\u0633\u062a\u062b\u0646\u0627\u0621 \u0645\u0633\u062a\u062e\u062f\u0645",[a.T.UserExclusionRemoved]:"\u0625\u0644\u063a\u0627\u0621 \u0627\u0633\u062a\u062b\u0646\u0627\u0621",[a.T.ExpirationSet]:"\u062a\u062d\u062f\u064a\u062f \u062a\u0627\u0631\u064a\u062e \u0627\u0646\u062a\u0647\u0627\u0621",[a.T.Archived]:"\u0623\u0631\u0634\u0641\u0629",[a.T.Restored]:"\u0627\u0633\u062a\u0631\u062c\u0627\u0639",[a.T.Deleted]:"\u062d\u0630\u0641"},this.actionIcons={[a.T.Created]:"add_circle",[a.T.Updated]:"edit",[a.T.StatusChanged]:"swap_horiz",[a.T.PriorityChanged]:"priority_high",[a.T.Assigned]:"person_add",[a.T.AttachmentAdded]:"attach_file",[a.T.AttachmentRemoved]:"delete_sweep",[a.T.PermissionGranted]:"vpn_key",[a.T.PermissionRevoked]:"lock",[a.T.DepartmentAccessGranted]:"business",[a.T.DepartmentAccessRevoked]:"business_center",[a.T.UserExcluded]:"block",[a.T.UserExclusionRemoved]:"check_circle",[a.T.ExpirationSet]:"schedule",[a.T.Archived]:"archive",[a.T.Restored]:"unarchive",[a.T.Deleted]:"delete_forever"},this.currentUserId=this.currentUser?.id||0}ngOnInit(){const n=this.route.snapshot.paramMap.get("id");n?this.loadOrderDetails(n):this.router.navigate(["/app/document-management/orders"])}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadOrderDetails(n){this.isLoading=!0,this.departmentService.getOrderById(n).pipe((0,d.Q)(this.destroy$)).subscribe({next:i=>{if(!i)return this.snackBar.open("\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),void this.router.navigate(["/app/document-management/orders"]);this.order=i,this.isOwner=!!this.currentUser?.userName&&i.createdBy?.toLowerCase()===this.currentUser.userName.toLowerCase(),this.showPermissionsTab=this.isOwner||this.authService.isAdmin(),this.showActiveUsersTab=this.isOwner||this.authService.isAdmin(),this.loadMyPermissions(i),this.loadOrderHistory(n),this.showActiveUsersTab&&this.loadActiveUsers(n),this.isLoading=!1},error:i=>{console.error("Error loading order:",i),this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0637\u0644\u0628","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.isLoading=!1}})}loadMyPermissions(n){if(!n||!this.currentUser?.code)return void(this.myPermissions={userId:this.currentUserId,orderId:parseInt(n?.id||"0",10),canView:n?.isPublic||!1,canEdit:!1,canDelete:!1,canShare:!1,canDownload:!1,canPrint:!1,canComment:!1,canApprove:!1,isOwner:this.isOwner,isExcluded:!1,permissionSource:n?.isPublic?"Public":"None"});if(this.isOwner)return void(this.myPermissions={userId:this.currentUserId,orderId:parseInt(n.id,10),canView:!0,canEdit:!0,canDelete:!0,canShare:!0,canDownload:!0,canPrint:!0,canComment:!0,canApprove:!0,isOwner:!0,isExcluded:!1,permissionSource:"Owner"});const i=n.userPermissions?.find(c=>c.userCode===this.currentUser.code)||n.permissions?.find(c=>c.userCode===this.currentUser.code);this.myPermissions=i?{userId:this.currentUserId,orderId:parseInt(n.id,10),canView:i.canView,canEdit:i.canEdit,canDelete:i.canDelete,canShare:i.canShare,canDownload:i.canDownload,canPrint:i.canPrint,canComment:i.canComment,canApprove:i.canApprove,isOwner:!1,isExcluded:!1,permissionSource:"Direct"}:n.userExceptions?.some(c=>c.userCode===this.currentUser.code)?{userId:this.currentUserId,orderId:parseInt(n.id,10),canView:!1,canEdit:!1,canDelete:!1,canShare:!1,canDownload:!1,canPrint:!1,canComment:!1,canApprove:!1,isOwner:!1,isExcluded:!0,permissionSource:"None"}:n.isPublic?{userId:this.currentUserId,orderId:parseInt(n.id,10),canView:!0,canEdit:!1,canDelete:!1,canShare:!1,canDownload:!1,canPrint:!1,canComment:!1,canApprove:!1,isOwner:!1,isExcluded:!1,permissionSource:"Public"}:{userId:this.currentUserId,orderId:parseInt(n.id,10),canView:!1,canEdit:!1,canDelete:!1,canShare:!1,canDownload:!1,canPrint:!1,canComment:!1,canApprove:!1,isOwner:!1,isExcluded:!1,permissionSource:"None"}}loadOrderHistory(n){this.departmentService.getOrderHistory(n).pipe((0,d.Q)(this.destroy$)).subscribe({next:i=>{this.orderHistory=i.history},error:i=>{console.error("Error loading history:",i)}})}loadActiveUsers(n){this.showActiveUsersTab&&(this.activeUsers=[],this.order?.createdBy&&this.activeUsers.push({userId:this.currentUserId,userName:this.currentUser?.userName||"\u0645\u0627\u0644\u0643 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629",userEmail:this.currentUser?.email||"",accessType:"owner",accessLevel:"\u0643\u0627\u0645\u0644",canView:!0,canEdit:!0,canDelete:!0,source:"\u0645\u0627\u0644\u0643 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"}),this.departmentService.getOrderUserPermissions(n).pipe((0,d.Q)(this.destroy$)).subscribe({next:i=>{i.forEach(o=>{o.userId!==this.currentUserId&&this.activeUsers.push({userId:o.userId,userName:o.userCode||"\u0645\u0633\u062a\u062e\u062f\u0645",userEmail:o.userEmail||"",accessType:"direct",accessLevel:this.getAccessLevelFromPermission(o),canView:o.canView,canEdit:o.canEdit,canDelete:o.canDelete,grantedAt:o.grantedAt,source:"\u0635\u0644\u0627\u062d\u064a\u0629 \u0645\u0628\u0627\u0634\u0631\u0629"})})},error:i=>{console.error("Error loading user permissions:",i)}}),this.departmentService.getOrderDepartmentAccesses(n).pipe((0,d.Q)(this.destroy$)).subscribe({next:i=>{i.forEach(o=>{this.activeUsers.push({userId:0,userName:o.departmentNameAr||"\u0625\u062f\u0627\u0631\u0629",userEmail:"",accessType:"department",accessLevel:this.getAccessLevelLabel(o.accessLevel),canView:o.accessLevel>=a.h.ViewOnly,canEdit:o.accessLevel>=a.h.Edit,canDelete:o.accessLevel>=a.h.Full,grantedAt:o.grantedAt,source:`\u0648\u0635\u0648\u0644 \u0625\u062f\u0627\u0631\u0629: ${o.departmentNameAr}`})})},error:i=>{console.error("Error loading department accesses:",i)}}),this.departmentService.getOrderUserExceptions(n).pipe((0,d.Q)(this.destroy$)).subscribe({next:i=>{i.forEach(o=>{const c=this.activeUsers.find(O=>O.userId===o.userId);c&&(c.accessLevel="\u0645\u0645\u0646\u0648\u0639",c.canView=!1,c.canEdit=!1,c.canDelete=!1)})},error:i=>{console.error("Error loading user exceptions:",i)}}))}getAccessLevelFromPermission(n){return n.canDelete?"\u0643\u0627\u0645\u0644":n.canEdit?"\u062a\u0639\u062f\u064a\u0644":n.canView?"\u0639\u0631\u0636 \u0641\u0642\u0637":"\u0644\u0627 \u064a\u0648\u062c\u062f"}getAccessLevelLabel(n){switch(n){case a.h.ViewOnly:return"\u0639\u0631\u0636 \u0641\u0642\u0637";case a.h.Edit:return"\u062a\u0639\u062f\u064a\u0644";case a.h.Full:return"\u0643\u0627\u0645\u0644";default:return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}}getStatusColor(n){switch(n){case"pending":case"cancelled":return"warn";case"in-progress":return"accent";case"completed":return"primary";default:return""}}getPriorityColor(n){switch(n){case"low":return"primary";case"medium":return"accent";case"high":case"urgent":return"warn";default:return""}}getActionColor(n){return[a.T.Created,a.T.Assigned,a.T.PermissionGranted].includes(n)?"primary":[a.T.Deleted,a.T.PermissionRevoked,a.T.UserExcluded].includes(n)?"warn":"accent"}formatDate(n){return n?("string"==typeof n?new Date(n):n).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}formatFileSize(n){return n<1024?n+" B":n<1048576?(n/1024).toFixed(2)+" KB":(n/1048576).toFixed(2)+" MB"}editOrder(){this.order&&this.myPermissions?.canEdit&&this.router.navigate(["/app/document-management/orders/edit",this.order.id])}deleteOrder(){!this.order||!this.myPermissions?.canDelete||confirm(`\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 "${this.order.title}"\u061f`)&&(this.snackBar.open("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0628\u0646\u062c\u0627\u062d","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.router.navigate(["/app/document-management/orders"]))}archiveOrder(){this.order&&this.isOwner&&null!==prompt("\u0633\u0628\u0628 \u0627\u0644\u0623\u0631\u0634\u0641\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a):")&&(this.snackBar.open("\u062a\u0645 \u0623\u0631\u0634\u0641\u0629 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0628\u0646\u062c\u0627\u062d","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.router.navigate(["/app/document-management/orders"]))}downloadAttachment(n){if(!this.myPermissions?.canDownload&&!this.isOwner)return void this.snackBar.open("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641","\u062d\u0633\u0646\u0627\u064b",{duration:3e3});const i=n.fileUrl;if(i){const o=i.includes("?")?`${i}&download=true`:`${i}?download=true`,c=document.createElement("a");c.href=o,c.download=n.fileName,c.target="_blank",document.body.appendChild(c),c.click(),document.body.removeChild(c),this.snackBar.open("\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0644\u0641...","\u062d\u0633\u0646\u0627\u064b",{duration:2e3})}}viewAttachment(n){if(!this.myPermissions?.canView&&!this.isOwner)return void this.snackBar.open("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641","\u062d\u0633\u0646\u0627\u064b",{duration:3e3});const i=n.fileUrl;i&&(this.isViewableFile(n)?window.open(i,"_blank"):(this.snackBar.open("\u0647\u0630\u0627 \u0627\u0644\u0646\u0648\u0639 \u0645\u0646 \u0627\u0644\u0645\u0644\u0641\u0627\u062a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0639\u0631\u0636\u0647. \u0633\u064a\u062a\u0645 \u062a\u062d\u0645\u064a\u0644\u0647.","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.downloadAttachment(n)))}isViewableFile(n){if(void 0!==n.canView)return n.canView;const i=n.fileType?.toLowerCase()||"",o=n.fileName?.toLowerCase()||"";if("pdf"===i||o.endsWith(".pdf")||"image"===i||i.startsWith("image/"))return!0;const c=[".jpg",".jpeg",".png",".gif",".bmp",".svg",".webp"],O=i.startsWith(".")?i.substring(1):i;return!!c.some(f=>f.substring(1)===O)||c.some(f=>o.endsWith(f))}goBack(){this.router.navigate(["/app/document-management/orders"])}openPermissionsDialog(){!this.isOwner||!this.order||this.dialog.open(D.i,{width:"1200px",maxWidth:"95vw",data:{orderId:this.order.id,orderTitle:this.order.title}})}grantUserPermission(){this.openPermissionsDialog()}grantDepartmentAccess(){this.openPermissionsDialog()}revokeUserPermission(n){!this.isOwner||!this.order||confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u0644\u063a\u0627\u0621 \u0635\u0644\u0627\u062d\u064a\u0629 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u061f")&&this.departmentService.revokeUserPermission(this.order.id,n).pipe((0,d.Q)(this.destroy$)).subscribe({next:()=>{this.snackBar.open("\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0628\u0646\u062c\u0627\u062d","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.loadOrderDetails(this.order.id)},error:i=>{console.error("Error revoking permission:",i),this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629","\u062d\u0633\u0646\u0627\u064b",{duration:3e3})}})}removeUserException(n){!this.isOwner||!this.order||confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u0644\u063a\u0627\u0621 \u0627\u0633\u062a\u062b\u0646\u0627\u0621 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u061f")&&this.departmentService.removeUserException(this.order.id,n).pipe((0,d.Q)(this.destroy$)).subscribe({next:()=>{this.snackBar.open("\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0627\u0633\u062a\u062b\u0646\u0627\u0621 \u0628\u0646\u062c\u0627\u062d","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.loadOrderDetails(this.order.id)},error:i=>{console.error("Error removing exception:",i),this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0627\u0633\u062a\u062b\u0646\u0627\u0621","\u062d\u0633\u0646\u0627\u064b",{duration:3e3})}})}revokeDepartmentAccess(n){!this.isOwner||!this.order||confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u0644\u063a\u0627\u0621 \u0648\u0635\u0648\u0644 \u0647\u0630\u0647 \u0627\u0644\u0625\u062f\u0627\u0631\u0629\u061f")&&this.departmentService.revokeDepartmentAccess(this.order.id,n).pipe((0,d.Q)(this.destroy$)).subscribe({next:()=>{this.snackBar.open("\u062a\u0645 \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0648\u0635\u0648\u0644 \u0628\u0646\u062c\u0627\u062d","\u062d\u0633\u0646\u0627\u064b",{duration:3e3}),this.loadOrderDetails(this.order.id)},error:i=>{console.error("Error revoking department access:",i),this.snackBar.open("\u062e\u0637\u0623 \u0641\u064a \u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0648\u0635\u0648\u0644","\u062d\u0633\u0646\u0627\u064b",{duration:3e3})}})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-order-details"]],standalone:!0,features:[t.aNF],decls:9,vars:3,consts:[[1,"order-details-container"],[1,"header-section"],["mat-icon-button","",1,"back-button",3,"click"],["class","loading-container",4,"ngIf"],["class","details-content",4,"ngIf"],[1,"loading-container"],[1,"details-content"],[1,"quick-info-card"],[1,"quick-info-grid"],[1,"info-item"],[1,"label"],[1,"value"],["selected","",3,"color"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"details-tabs",3,"selectedIndexChange","selectedIndex"],["label","\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0639\u0627\u0645\u0629"],[1,"tab-content"],[1,"info-grid"],[1,"info-row"],[1,"info-label"],[1,"info-value"],["class","info-row",4,"ngIf"],[1,"permissions-card"],["class","permissions-chips",4,"ngIf"],["label","\u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"],["class","empty-state",4,"ngIf"],[4,"ngIf"],["label","\u0627\u0644\u0633\u062c\u0644"],["class","timeline",4,"ngIf"],["label","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a",4,"ngIf"],["label","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0627\u0644\u0646\u0634\u0637\u064a\u0646",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"info-value","warn-text"],[1,"permissions-chips"],[1,"chip-container"],["color","primary","selected","",4,"ngIf"],["color","accent","selected","",4,"ngIf"],["color","warn","selected","",4,"ngIf"],["class","permission-source",4,"ngIf"],["color","primary","selected",""],["color","accent","selected",""],["color","warn","selected",""],[1,"permission-source"],[1,"empty-state"],["class","attachment-item",4,"ngFor","ngForOf"],[1,"attachment-item"],["matListItemIcon",""],["matListItemTitle","",1,"attachment-info"],[1,"file-name"],[1,"file-size"],["matListItemMeta","",1,"attachment-actions"],["mat-icon-button","","matTooltip","\u0639\u0631\u0636",3,"click","disabled"],["mat-icon-button","","matTooltip","\u062a\u062d\u0645\u064a\u0644",3,"click","disabled"],[1,"timeline"],["class","timeline-item",3,"last",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"timeline-marker",3,"ngClass"],[1,"timeline-content"],[1,"history-description"],["class","history-changes",4,"ngIf"],["class","history-notes",4,"ngIf"],[1,"history-changes"],["class","change-row",4,"ngIf"],[1,"change-row"],[1,"change-label"],[1,"change-value","old"],[1,"change-value","new"],[1,"history-notes"],["label","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"],["class","permission-item",4,"ngFor","ngForOf"],[1,"permission-item"],["matListItemTitle",""],[1,"user-name"],[1,"user-email"],["matListItemLine","",1,"permission-chips"],["matListItemMeta","","mat-icon-button","","color","warn","matTooltip","\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",3,"click"],[1,"dept-name"],["matListItemLine",""],["matListItemMeta","","mat-icon-button","","color","warn","matTooltip","\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0648\u0635\u0648\u0644",3,"click"],["class","exception-item",4,"ngFor","ngForOf"],[1,"exception-item"],["matListItemIcon","","color","warn"],["matListItemLine","",4,"ngIf"],["matListItemMeta","","mat-icon-button","","color","primary","matTooltip","\u0625\u0644\u063a\u0627\u0621 \u0627\u0644\u0627\u0633\u062a\u062b\u0646\u0627\u0621",3,"click"],["label","\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0627\u0644\u0646\u0634\u0637\u064a\u0646"],["class","active-user-item",4,"ngFor","ngForOf"],[1,"active-user-item"],["class","user-email",4,"ngIf"],["matListItemLine","",1,"user-access-info"],["matListItemLine","",1,"user-permissions"],["class","permission-badge view",4,"ngIf"],["class","permission-badge edit",4,"ngIf"],["class","permission-badge delete",4,"ngIf"],["matListItemMeta","","class","grant-date",4,"ngIf"],[1,"permission-badge","view"],[1,"permission-badge","edit"],[1,"permission-badge","delete"],["matListItemMeta","",1,"grant-date"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return o.goBack()}),t.j41(3,"mat-icon"),t.EFF(4,"arrow_back"),t.k0s()(),t.j41(5,"h1"),t.EFF(6),t.k0s()(),t.DNE(7,w,4,0,"div",3)(8,xt,130,36,"div",4),t.k0s()),2&i&&(t.R7$(6),t.JRh(o.order?o.order.title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading&&o.order))},dependencies:[l.MD,l.YU,l.Sq,l.bT,m.iI,P.hM,M._T,u.Hu,u.RN,u.m2,u.MM,u.Lc,u.dh,g.RI,g.mq,g.T8,p.Hl,p.$z,p.iY,h.m_,h.An,x.YN,x.Jl,_.Fg,_.jt,_.YE,_.ZV,_.C_,_.yE,_.BJ,v.D6,v.LG,b.uc,b.oV],styles:['.order-details-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;direction:rtl;text-align:right;font-family:Cairo,Segoe UI,Tahoma,sans-serif}.order-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:20px;color:#fff}.order-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{color:#fff}.order-details-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600}.order-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh;color:#fff;gap:20px}.order-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.order-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.order-details-container[_ngcontent-%COMP%]   .details-content[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;animation:_ngcontent-%COMP%_slideIn .5s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]{margin-bottom:20px;background:#fff;border-radius:12px;box-shadow:0 8px 24px #00000026;overflow:hidden}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:24px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:24px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);border-radius:8px;transition:all .3s ease}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea;font-size:28px;width:28px;height:28px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:4px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:500}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#333}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:28px;font-size:13px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-start;padding-top:16px;border-top:1px solid #e0e0e0}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;font-weight:600;transition:all .3s ease}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:8px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0003}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 8px 24px #00000026;overflow:hidden}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels{background:linear-gradient(135deg,#667eea,#764ba2)}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels .mat-mdc-tab-label{color:#ffffffb3;font-weight:600;font-size:14px;min-width:120px}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels .mat-mdc-tab-label.mat-mdc-tab-label-active{color:#fff;opacity:1}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels .mat-mdc-tab-label-content{display:flex;align-items:center;gap:8px}.order-details-container[_ngcontent-%COMP%]   .details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding:0}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px;min-height:400px}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:12px;box-shadow:0 4px 12px #0000001a;overflow:hidden}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:16px 24px;display:flex;justify-content:space-between;align-items:center}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;font-size:18px;font-weight:600;color:#333;margin:0}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#667eea}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.order-details-container[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:24px}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:200px 1fr;gap:16px;padding:12px;background:#f8f9fa;border-radius:8px;align-items:center}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{font-weight:600;color:#555;font-size:14px}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{color:#333;font-size:14px;display:flex;align-items:center;gap:8px}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value.warn-text[_ngcontent-%COMP%]{color:#f44336;font-weight:600}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]   mat-icon.public[_ngcontent-%COMP%]{color:#4caf50}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]   mat-icon.private[_ngcontent-%COMP%]{color:#ff9800}.order-details-container[_ngcontent-%COMP%]   .permissions-card[_ngcontent-%COMP%]   .permissions-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.order-details-container[_ngcontent-%COMP%]   .permissions-card[_ngcontent-%COMP%]   .permissions-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-weight:600}.order-details-container[_ngcontent-%COMP%]   .permissions-card[_ngcontent-%COMP%]   .permissions-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}.order-details-container[_ngcontent-%COMP%]   .permissions-card[_ngcontent-%COMP%]   .permissions-chips[_ngcontent-%COMP%]   .permission-source[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background:#e3f2fd;border-radius:8px;display:flex;align-items:center;gap:8px;color:#1976d2;font-size:14px}.order-details-container[_ngcontent-%COMP%]   .permissions-card[_ngcontent-%COMP%]   .permissions-chips[_ngcontent-%COMP%]   .permission-source[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.order-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#999}.order-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.5}.order-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]{padding:16px!important;border-bottom:1px solid #e0e0e0;transition:background .3s ease}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .file-icon.pdf[_ngcontent-%COMP%]{color:#f44336}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .file-icon.image[_ngcontent-%COMP%]{color:#4caf50}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .file-icon.document[_ngcontent-%COMP%]{color:#2196f3}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-info[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px;color:#666}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-actions[_ngcontent-%COMP%]{display:flex;gap:4px}.order-details-container[_ngcontent-%COMP%]   .attachment-item[_ngcontent-%COMP%]   .attachment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{position:relative;padding-right:40px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;right:19px;top:0;bottom:0;width:2px;background:linear-gradient(to bottom,#667eea,#764ba2)}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]{position:relative;margin-bottom:30px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{position:absolute;right:-30px;top:0;width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;z-index:2;box-shadow:0 2px 8px #0003}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2196f3,#1976d2)}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker.accent[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ff9800,#f57c00)}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker.warn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f44336,#d32f2f)}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:20px;width:20px;height:20px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{margin-right:20px;border-radius:12px;box-shadow:0 2px 8px #0000001a;transition:all .3s ease}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #00000026;transform:translate(-4px)}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:12px 16px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:12px;color:#666;margin-top:4px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-description[_ngcontent-%COMP%]{font-size:14px;color:#555;margin:0 0 12px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:12px;margin-bottom:12px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:8px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]   .change-label[_ngcontent-%COMP%]{font-weight:600;color:#555;font-size:13px;min-width:100px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]   .change-value[_ngcontent-%COMP%]{flex:1;font-size:13px;padding:4px 8px;border-radius:4px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]   .change-value.old[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-changes[_ngcontent-%COMP%]   .change-row[_ngcontent-%COMP%]   .change-value.new[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-notes[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#666;padding:8px;background:#fff3e0;border-radius:6px;margin:0}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .history-notes[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#ff9800}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]{padding:16px!important;border-bottom:1px solid #e0e0e0;transition:background .3s ease}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px;display:block}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:12px;color:#666;display:block;margin-top:4px}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .dept-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:14px}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-chips[_ngcontent-%COMP%]{margin-top:8px}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:28px;font-size:12px}.order-details-container[_ngcontent-%COMP%]   .permission-item[_ngcontent-%COMP%]   .permission-chips[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-left:4px}.order-details-container[_ngcontent-%COMP%]   .exception-item[_ngcontent-%COMP%]{padding:16px!important;border-bottom:1px solid #e0e0e0;background:#fff3f3}.order-details-container[_ngcontent-%COMP%]   .exception-item[_ngcontent-%COMP%]:hover{background:#ffe8e8}.order-details-container[_ngcontent-%COMP%]   .exception-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-container[_ngcontent-%COMP%]   .exception-item[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;color:#d32f2f;font-size:14px}.order-details-container[_ngcontent-%COMP%]   .exception-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#d32f2f}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]{padding:20px!important;border-bottom:1px solid #e0e0e0;transition:background .3s ease}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   mat-icon.owner[_ngcontent-%COMP%]{color:#4caf50}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   mat-icon.direct[_ngcontent-%COMP%]{color:#2196f3}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   mat-icon.department[_ngcontent-%COMP%]{color:#ff9800}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   mat-icon.public[_ngcontent-%COMP%]{color:#9c27b0}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:600;color:#333;font-size:15px;display:block}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:13px;color:#666;display:block;margin-top:4px}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-access-info[_ngcontent-%COMP%]{margin-top:8px}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-access-info[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-access-info[_ngcontent-%COMP%]   .chip-container[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{height:26px;font-size:12px}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]{margin-top:8px;display:flex;gap:8px;flex-wrap:wrap}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]   .permission-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:600}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]   .permission-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]   .permission-badge.view[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]   .permission-badge.edit[_ngcontent-%COMP%]{background:#fff3e0;color:#f57c00}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .user-permissions[_ngcontent-%COMP%]   .permission-badge.delete[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .grant-date[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:#666}.order-details-container[_ngcontent-%COMP%]   .active-user-item[_ngcontent-%COMP%]   .grant-date[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}@media (max-width: 768px){.order-details-container[_ngcontent-%COMP%]{padding:12px}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .quick-info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:stretch}.order-details-container[_ngcontent-%COMP%]   .quick-info-card[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.order-details-container[_ngcontent-%COMP%]   .info-grid[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]{padding-right:30px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]:before{right:14px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]{right:-25px;width:30px;height:30px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-marker[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.order-details-container[_ngcontent-%COMP%]   .timeline[_ngcontent-%COMP%]   .timeline-item[_ngcontent-%COMP%]   .timeline-content[_ngcontent-%COMP%]{margin-right:15px}}']})}}return e})()}}]);